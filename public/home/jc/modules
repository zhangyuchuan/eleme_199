_jsload_('mouse', 'f.Tb.fb({WC:"_docMsMov",zY:function(){var a=this.Ga.pc;f.A.h(a,"mousedown",this.kS,this);this.$G||(this.$G=function(){this.Gx=!1},this.YA=function(a){var c=this.Qg(a,!0);this.r(this.WC,{event:a,lT:c})});f.A.h(document,"mousedown",this.$G,this);f.A.h(document,"mouseout",this.YA,this);f.A.h(document,"mousemove",this.YA,this);f.A.h(a,"mousemove",this.lS,this);f.A.h(a,"mouseover",this.M9,this);f.A.h(a,"mouseup",this.mS,this);f.A.h(a,"contextmenu",this.Qw,this);f.A.h(a,"rightclick",this.Qw,this);this.h(this.WC, this.xT,this)},M9:function(){this.Gx=!0},C1:function(){var a=this.Ga.pc;f.A.H(a,"mousedown",this.kS,this);f.A.H(document,"mousedown",this.$G,this);f.A.H(document,"mouseout",this.YA,this);this.H(this.WC,this.xT,this);f.A.H(document,"mousemove",this.YA,this);f.A.H(a,"mousemove",this.lS,this);f.A.H(a,"mouseup",this.mS,this);f.A.H(a,"contextmenu",this.Qw,this);f.A.H(a,"rightclick",this.Qw,this)},BY:function(){f.A.h(this.Ga.pc,"mousewheel",this.jS,this)},F1:function(){f.A.H(this.Ga.pc,"mousewheel",this.jS, this)},AY:function(){this.h("mousemove",this.jO);this.h("mouseout",this.kO);this.h("mouseover",this.lO);this.h("mouseup",this.mO);this.h("mousedown",this.iO);this.h("rightclick",this.oO);this.h("contextmenu",this.aO);this.h("rdblclick",this.pO)},E1:function(){this.H("mousemove",this.jO);this.H("mouseout",this.kO);this.H("mouseover",this.lO);this.H("mouseup",this.mO);this.H("mousedown",this.iO);this.H("rightclick",this.oO);this.H("contextmenu",this.aO);this.H("rdblclick",this.pO)},keyboardEnableChanged:function(){this.get("keyboardEnable")? this.xY():this.dE()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.nO):this.H("mousewheel",this.nO)},Qw:function(a){f.A.preventDefault(a)},u1:function(a){var b=this.Qg(a),c=0;"3D"==this.O.view.type?(this.da("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/1200,a=this.get("zoom")+a,this.FQ(a,b.Zd,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&9.5>parseFloat(window.opera.version())&& (c=-c)):a.detail&&(c=-a.detail),this.P.Ku=(this.P.Ku||0)+c,this.r("mousewheel",b))},jS:function(a){if(this.get("scrollWheel"))if(this.u1(a),a.preventDefault)a.preventDefault();else return!1},aH:function(a,b){f.A.preventDefault(a);b=this.Qg(a);var c=this.P;if(!this.Dp(b.ub,c.qo)){c.qo=b.ub;if(c.sm){if(!c.Ec&&(b.ub.x!==this.P.al.x||b.ub.y!==this.P.al.y)){var d;this.BD(c.po)&&c.po.get("draggable")&&(d=c.po);!d&&this.get("dragEnable")&&(d=this);d&&(c.Ec=!0,c.wl=d,c.Ne=c.al,c.ul=c.xI)}c.Ec&&(c.vl=b,b.button= a.buttons||a.button||0,this.vE())}if(a.preventDefault)a.preventDefault();else return!1}},Pz:function(a){f.g.Fa(this.J,"amap-drag");a=this.Qg(a);f.g.x8();f.g.kR();this.P&&(this.P.Ec=!1);this.P.$k&&(this.P.$k=!1,this.P.Ec=!1,this.P.wl.r("dragend",a));this.P.sm=!1;this.P.qo=null;this.P.Ne=null;f.A.H(document,"mousemove",this.aH,this);f.A.H(document,"mouseup",this.Pz,this);try{f.A.H(window.parent.document,"mouseup",this.Pz,this)}catch(b){}f.A.Rda(this.Ga.pc)},N9:function(a,b){b=b||this.Qg(a);var c=this.get("size"), d;0<=b.ub.x&&b.ub.x<=c.width&&0<=b.ub.y&&b.ub.y<=c.height&&(d=!0);this.OS&&!d?this.r("mouseout",b):!this.OS&&d&&this.r("mouseover",b);this.OS=d},lS:function(a){f.A.preventDefault(a);f.l.mn&&(a=window.event);if(a){a=this.Qg(a);var b=this.P,c=a.Nc,d;this.P.sm||(c instanceof f.C.Pf?d=c.Oc.get("cursor"):c instanceof f.D.hc?d=c.get("cursor"):c===this&&(d=c.get("defaultCursor")),d=this.O.get("optimalCursor")||d,this.J.style.cursor=d||"");d=b.$0;var e=a.Co;d!==e&&(d&&b.xN&&b.xN.r("mouseout",a),e&&c&&(c.r("mouseover", a),c.get("topWhenMouseOver")&&c.Oc.setTop(!0)));a.Nc.r("mousemove",a);a.Nc!==this&&this.r("mousemove",a);b.$0=a.Co||null;b.xN=a.Nc||null}},P:{Ec:!1},kS:function(a){this.Gx=!0;f.g.U7();f.g.eR();this.P.qo=null;this.P.Ne=null;var b=this.Qg(a,!0);this.P.fR=new Date;this.P.po=b.Nc;this.P.al=b.ub;this.P.Y0=b.button;this.P.sm=!0;this.P.Z0=b;this.P.Ec||(this.P.xI=b);this.sd&&this.sd.stop();var c=b.Nc;!c.Oc&&c.get("dragEnable")&&(this.P.sm=!0);f.g.xa(this.J,"amap-drag");b.Nc.r("mousedown",b);b.Nc!==this&& this.r("mousedown",b);f.A.vca(this.Ga.pc);f.A.h(document,"mousemove",this.aH,this);f.A.h(document,"mouseup",this.Pz,this);try{window.parent.document&&f.l.mn&&f.A.h(window.parent.document,"mouseup",this.Pz,this)}catch(d){}f.A.stopPropagation(a)},xT:function(a){this.N9(a.event,a.lT)},lga:function(a){this.aH(a.event,a.lT)},mS:function(a){a=this.Qg(a);var b=a.Nc,c=this.O.get("allBubble")||b.get("bubble");b!==document&&(b.r("mouseup",a),a.Nc!==this&&c&&this.r("mouseup",a));this.Dp(a.ub,this.P.al)&&(this.oe&& this.Dp(this.P.Eq,a.ub)&&a.button===this.P.Y0?(clearTimeout(this.oe),this.oe=null,f.A.SS(a)?c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a):b.r("rdblclick",a),this.P.Eq=null):(f.A.SS(a)?(this.r("clickstart",a),c?(b.r("click",a),b!==this&&this.r("click",a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&b.Oc.setTop(!0),this.r("clickend",a)):c?(b.r("rightclick",a),b!==this&&this.r("rightclick",a),this.r("contextmenu",a)):(b.r("rightclick",a),b.r("contextmenu", a)),this.P.Eq=a.ub,this.oe&&clearTimeout(this.oe),this.oe=setTimeout(f.a.bind(function(){clearTimeout(this.oe);this.oe=null;this.P.Eq=null},this),260)))}});f.Tb.fb({nO:function(a){this.da("mousewheel",a);var b=this;if(1<=Math.abs(this.P.Ku)&&!this.AW){var c=this.P.Ku;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.ay(a.Zd,c);this.P.Ku=0;this.AW=!0;setTimeout(function(){b.AW=!1;b.P.Ku=0},f.l.Av?50:40)}},jO:function(a){this.da("mousemove",a)},kO:function(a){this.da("mouseout",a)},lO:function(a){this.da("mouseover",a)},mO:function(a){this.da("mouseup",a)},iO:function(a){this.da("mousedown",a)},oO:function(a){this.da("rightclick",a)},aO:function(a){this.da("contextmenu", a)},pO:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.ay(a.Zd,-1);this.da("rdblclick",a)}});f.Tb.fb({H0:function(){this.Jt={left:[37],right:[39],b8:[40],PJ:[38],lg:[187,107,61],mg:[189,109,173]};this.jZ={left:this.ar(this.Zx(100,0)),right:this.ar(this.Zx(-100,0)),b8:this.ar(this.Zx(0,-100)),PJ:this.ar(this.Zx(0,100)),lg:this.ar(this.YP(1)),mg:this.ar(this.YP(-1))}},xY:function(){this.get("keyboardEnable")&&(this.Jt||this.H0(),f.A.h(document,"keydown",this.Vx,this),f.A.h(document,"keyup",this.XN,this))},dE:function(){f.A.H(document,"keydown",this.Vx,this);f.A.H(document,"keyup",this.XN,this)}, XN:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},Vx:function(a){var b=a.keyCode,c;for(c in this.Jt)if(this.Jt.hasOwnProperty(c))for(var d=0;d<this.Jt[c].length;d+=1)if(b===this.Jt[c][d]){if(!this.Gx)return;if(!a.ctrlKey&&!a.shiftKey){this.jZ[c]();f.A.preventDefault(a);return}37===b?(this.c1(),f.A.preventDefault(a)):39===b?(this.Y4(),f.A.preventDefault(a)):38===b?(this.b4(),f.A.preventDefault(a)):40===b&&(this.a4(),f.A.preventDefault(a))}},ar:function(a){return function(){a()}}, c1:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Y4:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},a4:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},b4:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},YP:function(a){var b=this.O;return function(){1===a?b.zoomIn():b.zoomOut()}}, Zx:function(a,b){var c=this.O;return function(){c.panBy(a,b)}}}); ')
_jsload_('vectorlayer', '(function(a){a.Cn=a.l.rn?new a.at(function(){function a(b,c,d){for(var e=0,g=d.length;e<g;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h); }}function c(a,b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c= 0,d=a.length;c<d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function g(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219), e.setUint32(h+1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<= c){if(128>c)return e.setUint8(h,c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+ (-c).toString(16).substr(1));}if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,r=Array.isArray(c),t=null;r?q=c.length:(t=Object.keys(c),q=t.length);16>q?(e.setUint8(h,q|(r?144:128)),k=1):65536>q?(e.setUint8(h,r?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,r?221:223),e.setUint32(h+1,q),k=5);if(r)for(r=0;r<q;r++)k+=g(c[r],e,h+k);else for(r= 0;r<q;r++)var u=t[r],k=k+g(u,e,h+k),k=k+g(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19> a)return 9;throw Error("Number too big 0x"+a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var g=Object.keys(a),c=g.length,e=0;e<c;e++)var k=g[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536> c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+c.toString(16));}throw Error("Unknown type "+b);}var k={eha:function(a){if(void 0===a)return"undefined";var b,c;a instanceof ArrayBuffer?(c="ArrayBuffer",b=new DataView(a)):a instanceof DataView&&(c="DataView",b=a);if(!b)return JSON.stringify(a);for(var d=[],e=0;e<a.byteLength;e++){if(20<e){d.push("...");break}var g=b.getUint8(e).toString(16);1===g.length&&(g="0"+g);d.push(g)}return"<"+c+" "+d.join(" ")+">"}};k.jja= a;k.ija=c;k.hja=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.tF=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.aB=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.kF=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b};e.prototype.parse=function(){var a=this.view.getUint8(this.offset); if(160===(a&224))return this.offset++,this.aB(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.kF(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.aB(a);case 218:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.aB(a); case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.aB(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.tF(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.tF(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.tF(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+1),this.offset+=2,a;case 205:return a= this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a=this.view.getInt32(this.offset+ 1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.kF(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.kF(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a=this.view.getFloat64(this.offset+ 1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.fh=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.Su=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);g(a,c,0);return b};return{Su:function(a,b){b(null,{Jr:a.Jr,yd:a.yd,Ja:k.Su(a.Ja)})},fh:function(a,b){b(null,{Jr:a.Jr,yd:a.yd,Ja:k.fh(a.Ja)})}}},{hostWorker:a.Nz,clientId:"msg",lazy:!0}):new a.at(function(){},{hostWorker:a.Nz, clientId:"msg",lazy:!0})})(f);f.yX=f.Z.extend({ea:[f.ia],B:function(){this.q5=f.w.yW+"://"+f.w.xw;this.il=[];this.ce=f.a.Fb(this);this.tY=1;this.Cc="closed";this.count=0;this.OI=[];f.event.V(window,"beforeunload",this.N$,this);f.Cn&&f.Cn.er()},N$:function(){this.OI.length&&new f.Ka.Xa(f.w.bc+"://webapi.amap.com/count?"+["type=v","k="+f.w.key,"u="+f.w.Jm,"m="+(f.l.Y?1:0),"pf="+f.l.Ep,"frq="+this.OI.join(",")].join("&"))},close:function(){this.Yb&&(this.Cc="closed",this.il=[],this.$C())},p7:function(){var a=this;if("closed"===a.Cc){var b= new WebSocket(this.q5);b.binaryType="arraybuffer";a.Cc="connecting";b.onopen=f.a.bind(this.j2,this);b.onclose=f.a.bind(this.N1,this);b.onerror=f.a.bind(this.Ab,this);b.ontimeout=f.a.bind(this.Ab,this);b.onmessage=f.a.bind(this.W2,this);this.Yb=b;b.r7=setTimeout(function(){b.readyState!==WebSocket.OPEN&&a.Kv()},1200)}},LS:function(){return"connected"===this.Cc},Kv:function(){this.Cc="unsupport";this.il=[];this.$C();this.r("disable")},Ab:function(){this.Kv()},j2:function(){this.q7=!0;this.flush();this.r("open")}, N1:function(){this.q7?(this.Cc="closed",this.$C()):this.Kv()},WN:function(a,b){if("unsupport"===this.Cc)return!1;"connected"===this.Cc?this.oP(a):("closed"===this.Cc&&this.p7(),this.il.push({data:a,aw:b}));this.count+=1},W1:function(a){if("ack"===a.type)switch(a.command){case "tiles":this.r("ack",a);break;case "retain":this.Cc="connected";this.flush();break;case "close":this.Kv()}else 0===a.content.errcode&&("tiles"===a.type?this.r("tiles",a):"traffic"===a.type&&this.r("traffic",a))},xaa:function(a){"encode"=== a.yd?this.WN(a.Ja):"decode"===a.yd&&this.W1(a.Ja)},send:function(a){var b=this.tY++,c=this;f.Cn.Su({yd:"encode",Ja:a,Jr:this.ce},function(a,e){a||c.WN(e.Ja,b)});return b},oP:function(a){var b=this,c=b.Yb;c.readyState===WebSocket.OPEN&&(c.send(a),b.Is&&clearTimeout(b.Is),b.Is=setTimeout(function(){b.Kv();b.Is=null},5E3),b.WJ&&clearTimeout(b.WJ),b.WJ=setTimeout(function(){b.close();b.WJ=null},1E4))},$C:function(){var a=this.Yb;a&&(clearTimeout(a.r7),a.onopen=a.onmessage=a.onerror=null,a.close(),this.Yb= null)},flush:function(){if("connected"===this.Cc){for(var a=0;a<this.il.length;a+=1)this.oP(this.il[a].data);this.il=[]}},p8:function(a){for(var b=0;b<this.il.length;b+=1)if(this.il[b].aw===a)return this.il.splice(b,1),!0;return!1},W2:function(a){this.Is&&(clearTimeout(this.Is),this.Is=null);var b=this;f.Cn.Ly([a.data]);f.Cn.fh({Jr:b.ce,yd:"decode",Ja:a.data},function(a,d){a||b.xaa(d)})}});f.Ph={aW:function(){0===f.Pa.Cd&&f.Ph.pS()},gja:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Es===b)return!0},Y6:function(a,b){var c="limg-"+a.key+"-"+b.q.ce;f.Pa[c]&&delete f.Pa[c]},CR:function(a){return f.Pa[a.Es?a.Es:a]},Hl:function(a){var b=null,c=null,d=!1;a.Es?(b=a,c=b.Es,(a=b.url)&&(d=!0)):c=a;var e=f.Pa[c];d&&e&&e.src!==a&&(e=f.Pa[c]=null);if(!e&&a){d="data:"===a.substr(0,5);e=document.createElement("img");d||(e.crossOrigin="Anonymous");f.Pa[c]=e;e.loaded=!1;f.Pa.Cd+= 1;f.A.h(e,"load",this.Qz,this);f.A.h(e,"error",this.oS,this);var g=this;e.ys=setTimeout(function(){e.loaded||g.pS()},300);e.src=a;b&&(e.Ffa=c,b.url=null)}},pS:function(){for(var a=0;a<f.Pa.Tn.length;a+=1)f.Pa.Tn[a].set("display")},KQ:function(a){f.A.H(a,"load",this.Qz,this);f.A.H(a,"error",this.oS,this)},Qz:function(a){a=a.target;a.loaded=!0;f.Pa.Cd-=1;this.KQ(a);this.aW();a.ys&&(clearTimeout(a.ys),a.ys=null)},oS:function(a){a=a.target;a.loaded=!1;f.Pa.Cd-=1;this.KQ(a);this.aW();a.ys&&(clearTimeout(a.ys), a.ys=null)}};f.D.Xi=f.D.hc.extend({B:function(a,b,c){this.My=c;f.Pa.Tn.push(this);this.ce=f.a.KR("layer");this.gb=2;a.get("textRatio");this.nK=25;this.X("tiles",a);this.fea=a.get("vdataUrl")||b.O.get("vdataUrl")||f.w.xw;this.Ng=!0;this.qa=a;this.gi=f.l.Y?!1:!0;this.j=b;this.ah=this.$g=!0;this.Sd("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.Sd("zooms detectRetina visible zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.Ks=new Image,this.Ks.src=this.get("watermark"));this.kja="v4";this.Ba={};this.Af={};this.dd=256;this.yp=[];this.Re=this.Ef=0;this.ga=f.l.ga&&this.get("detectRetina");this.dd=256*(this.ga?2:1);this.X("mapStyle",b);this.X("style",b);this.sl=0;this.X("features",b);this.Wd=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.De=!1;if(this.j.get("styleUrl")||"normal"===this.get("mapStyle"))this.De=!!this.j.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.qa.Jn()},C5:function(){var a=!1,b=this.MM();if(b){if(this.qg){var c="active"===this.qg.Ct;b.kt(this.qg);c&&(b.mo(this.qg,"active"),a=!0)}f.l.U6&&!a&&b.xy()}},et:function(){this.C5()},ow:function(a,b){var c=!0;if("hotspotout"===a)this.j.O.set("optimalCursor",null);else if("hotspotover"===a)this.j.O.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.MM();if(d)switch(a){case "hotspotout":d.Cy(b); break;case "hotspotover":d.mo(b,"hover");break;case "mouseup":d.mo(b,"hoverup");break;case "mousedown":d.mo(b,"active")}c&&(c=b.Na,c=new f.I(c[0],c[1]),c=this.j.Dd(c,3),this.j.O.r(a,{name:b.name,lnglat:c,id:b.Rl,isIndoorPOI:b.uH}))},MM:function(){if(!f.l.wS){var a=this.R||this.Lk;if(!a)return null;var b=this.j?this.j.O.get("hotspotOptions"):{},b=f.extend({},b);if(b.disableHighlight)return null;this.iu||(this.iu=new f.D.Xi.BX(a));return this.iu}},wm:function(a){(a=this.UR(a))&&this.ow("hotspotclick", a)},Mq:function(a){var b="mousemove"===a.type;if(!this.j.yh||!b){var c=this.UR(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.qg!==c&&(this.qg&&this.ow("hotspotout",this.qg),this.ow("hotspotover",c)),!c&&this.qg&&this.ow("hotspotout",this.qg),c&&!b&&this.ow(a.type,c)}this.qg=c}},textIndexChanged:function(){this.set("display")},Baa:function(){this.j.h("click",this.wm,this);this.j.h("mousemove",this.Mq,this);this.j.h("mousedown",this.Mq,this);this.j.h("mouseup",this.Mq,this)}, KF:function(){this.j.H("click",this.wm,this);this.j.H("mousemove",this.Mq,this);this.j.H("mousedown",this.Mq,this);this.j.H("mouseup",this.Mq,this)},zi:function(){return null},Al:function(){return{Ng:!0,dd:256,visible:this.get("visible"),Xc:this.get("zooms"),Vy:this.gi&&this.ya,$g:!this.j.jB,ah:!this.j.jB,opacity:this.get("opacity"),kd:!1}},wj:function(a){if(f.R.canvas.Xi)return new f.R.canvas.Xi(this,a)},zu:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")||f.l.Y&& !this.ga?"6":"5";this.url=f.w.bc+"://"+this.fea+"/tiles?mapType="+a+"&v=2&style="+b;this.url+=this.ga?"&rd=2":"&rd=1";this.url+="&flds="+this.Oa;this.url+="&t="},styleChanged:function(){this.j.Wb||this.featuresChanged()}}); f.D.Ac=f.D.Xi.extend({wj:function(a){var b=this;if(!b.Ks&&f.l.Bf&&"vw"===b.j.get("baseRender")){var c=["wgl"];this.j.Wb&&c.push("wgl2");if(f.ib.rv(c))return new f.R.Fe.Ac(b,a)}else if(c=["cmng","cgl"],this.j.Wb&&c.push("cgl2"),f.ib.rv(c))return new f.R.canvas.Ac(b,a);f.ib.hg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.My:a&&(-1!==f.a.indexOf(a,"bg")&&-1!==f.a.indexOf(this.My,"region")&&b.push("region"),-1!==f.a.indexOf(a,"building")&& -1!==f.a.indexOf(this.My,"building")&&b.push("building"),-1!==f.a.indexOf(a,"road")&&-1!==f.a.indexOf(this.My,"road")&&b.push("road"));this.Oa=b;this.zu(this.get("mapStyle")||"normal");this.set("reload")}}); f.D.uh=f.D.Xi.extend({wj:function(a){var b=this;if(this.kH()){if(this.Gs=!0,f.R.canvas.aC)return this.vQ(),a=new f.R.canvas.aC(this,a),a.h("afterLabelRender",this.et,this),a}else{b.Gs=!1;if(f.R.canvas.$B)return a=new f.R.canvas.$B(this,a),a.h("afterLabelRender",this.et,this),a;a=["cmng","labelcanvas"];f.l.gG&&a.push("labelDir");f.ib.hg(a,function(){b.set("display")})}},kH:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.j.get("nolimg")?!1:f.l.Gs?!0:!1},b$:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.j.get("nolimg")||f.l.kd||f.l.Y?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==f.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==f.a.indexOf(a,"point")&&c.push("poilabel"));a=this.kH();c.length&&(a||this.b$())&&c.unshift("limg");this.Oa=c;this.zu(b);this.set("reload");(b=this.R||this.Lk)&&a^this.Gs&&(this.iu&&(this.iu=this.iu.R=null),b.H("afterLabelRender", this.et,this),b.or(),this.Lk=this.R=null)},vQ:function(){this.up=f.w.bc+"://"+(this.qa.get("vdataUrl")||this.j.O.get("vdataUrl")||f.w.xw)+"/limg?";var a=this.ga?2:1;this.up+="&font="+(f.l.Y&&!this.ga?"big":"small");this.up+="&scl="+a;this.up+="&t="},UR:function(a){return a.ze?(a=this.GR(this.j.Pb(a.ze,20),!0))?a[0]:null:null},GR:function(a,b){var c=this.j.Fz();if(c&&(c=c.hp(this)))return c.zr(a,b)}});f.D.Xi.BX=f.Z.extend({B:function(a){this.g5(a)},g5:function(a){this.R=a},Cy:function(a){if(a.Ct){a.Ct=!1;var b=this.R;b&&b.Cy.apply(b,arguments)}},kt:function(a){a.Ct=!1;var b=this.R;b&&b.kt.apply(b,arguments)},mo:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.Ct!==b){a.Ct=b;var c=this.R;c&&c.mo.apply(c,arguments)}},xy:function(){var a=this.R;a&&a.xy()}});f.Ys={ht:function(a,b){this.Ze={};this.Ze.Jr=f.a.Fb(this.Ze);b.Yb||(b.Yb=new f.yX);this.Yb=b.Yb;this.Yb.h("tiles",this.LT,this);this.Yb.h("ack",this.KT,this);this.Yb.h("disable",this.JT,this)},pA:function(a){if(this.q&&a.AH===this.q.ce){var b=this.q.Oa,b=b[b.length],c=null,c="poilabel"===b||"roadlabel"===b?"labels":"allbase";this.ke||this.Pe?this.AI([this.q,"groupcomplete",null,null,c]):(this.Lh(),this.xo.iz(this.q,"groupcomplete",null,null,c));b=0;for(c=a.Kd.length;b<c;b+=1)this.Jv(a.Kd[b],a.wv, a.ls,a.Y)}},Jv:function(a,b){var c=a.yd,d=this.Ba.get(a.Oi);if(d){var e=this.q.Oa;d.Oa||(d.Ma={},d.Oa=[]);var g="";(this.j.Li&&!this.j.Wb||this.k$&&this.j.Wb)&&this.vG(c,a.Ja);"poilabel"===c||"roadlabel"===c?(a.Hi||(g=a.Ja,a.Hi=null),d.Oa.push.apply(d.Oa,a.Ja),c===this.q.Oa[this.q.Oa.length-1]&&(d.Hi=null)):d.Ma[c]=a.Ja;"building"!==c&&"poilabel"!==c||!a.Ej||d.Wf||(d.Wf={},d.Wf.de=a.Ej,f.hm&&f.hm.r("vecTileParsed.buildings",{hw:d}));if("roadlabel"!==c&&"poilabel"!==c||this.l$||!f.l.gG&&!this.j.Wb)this.ke|| this.Pe?this.AI([this.q,g,d,b,c]):(this.Lh(),this.xo.iz(this.q,g,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.ke||this.Pe?this.AI([this.q,"tileComplete",d,b,c]):(this.Lh(),this.xo.iz(this.q,"tileComplete",d,b,c)))}},EF:function(){if(this.j){var a=this.j.O.getMapStyle();this.yn=a;this.T0(a);this.Yb&&"unsupport"!==this.Yb.Cc&&(-1!==a.indexOf("amap://styles")&&(a="normal"),this.Yb.send({command:"status",payload:{mapType:a,style:f.l.Y&&!this.q.ga?"6":"5",rd:this.q.ga? 2:1}}))}},mapStyleChanged:function(){this.EF()},styleChanged:function(){this.EF()},JT:function(){for(var a in this.Ze)this.Ze.hasOwnProperty(a)&&this.Ze[a].xs&&(this.rt(this.Ze[a].xs,this.Ze[a].Cf),delete this.Ze[a]);this.Yb=null;this.bi("mapStyle");this.set("display",1)},KT:function(a){var b=a.reqId;this.Ze[b]&&(!a.content.status&&this.Ze[b]&&this.rt(this.Ze[b].xs,this.Ze[b].Cf),delete this.Ze[b])},LT:function(a){if(this.Ze[a.reqId]){var b=a.content.opt;b===this.kb?this.$H(a.content.data,b):this.rt(this.Ze[a.reqId].xs, this.Ze[a.reqId].Cf)}},IH:function(a,b){if(a.length)if(this.CU)this.BT=!0;else{var c=1,d=[],e=this;18<b&&(c=Math.pow(2,b-18));for(var g=Math.pow(2,20-a[0].ja.z),h=0;h<a.length;h+=1){var k=a[h],l=k.ja;k.Cf=b;l.Q=g;if(18<b&&!this.Qh){for(var m=0;m<c;m+=1)for(var n=0;n<c;n+=1){var p=new f.nb(new f.di(b,c*l.x+m,c*l.y+n));this.Ba.Pc(p.key)||(this.Ba.set(p.key,p),p.status="loading")}this.Ba.set(k.key+"/"+b,k)}else this.Ba.set(k.key,k),this.Qh&&10>l.z&&this.AR(k)?this.set("display",0):k.status="loading"}this.l4(a, b,f.a.bind(function(a,c){if(c.length){for(var e=0,g=c.length;e<g;e++){var h=c[e].ja,k=h.x,l=h.y,h=h.z;if(10>h){var m=Math.pow(2,h);if(k>=m||0>k)k=(k+m)%m}k=f.a.rz(k,l,h).join(",");f.a.ea(d,k)||d.push(k)}!this.qn&&this.Yb&&"unsupport"!==this.Yb.Cc?(1>this.Yb.count||3<this.PE?this.HH(c,b,d):(2!==this.Yb.count&&"connected"===this.Yb.Cc||this.EF(),this.I$(c,b,d)),this.Yb.count+=1,this.Yb.eT&&this.Yb.OI.push(Math.ceil((new Date-this.Yb.eT)/1E3)),this.Yb.eT=new Date):this.HH(c,b,d)}},this));window.renderDelay&& (this.CU=setTimeout(function(){e.BT&&e.set("display",!1);e.BT=!1;e.CU=null},window.renderDelay))}},T0:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.SJ=!0:this.SJ=!1},l4:function(a,b,c){if((f.l.Ee||f.l.Ij&&!this.j.O.ya)&&(this.qv||!this.SJ)&&18>=b){var d=f.eo,e=this,g=this.j,h=g.O;g.BH||void 0!==g.cA||("dv"===h.get("baseRender")?g.cA=1:g.cA=2);d.get({type:h.ya?"NFS":"FS",De:h.get("showBuildingBlock"),oda:a,Bf:!!this.Qh,D:this.q,url:this.wr(b,[])},function(d,l){if(e.q){if(!d&&l.hH.length){l.hH.length=== a.length&&(g.BH||g.cA--,f.md.Fd.end({key:e.LM(),index:0,id:h.id}));if(l.Kd){e.nk=l.ag["x-vd-v"];e.Ir=l.ag.tv;var m="#"+l.ag.bgc;e.j.nd!==m&&(e.j.nd=m);l.hH.forEach(function(a){a.status="loaded"});m=e.HM(b,l.Kd);e.pA(m)}else l.x$.forEach(function(a){e.oA(a,b,[],l.ag["x-vd-v"],!0)}),e.set("display");a=l.W$}c(null,a)}})}else c(null,a)},I$:function(a,b,c){var d=(new Date).getTime()+"-"+(this.Yb.count+1&65535),e={command:"tiles",reqId:d,payload:{t:c,opt:b,cs:{level:b,flds:this.q.Oa.join(",")}}},g;if(!this.Yb.LS()){var h= this;setTimeout(function(){h.Yb&&!h.Yb.LS()&&(h.PE?h.PE++:h.PE=1,h.Yb.p8(g)&&(delete h.Ze[d],h.HH(a,b,c)))},300)}g=this.Yb.send(e);this.Ze[d]={xs:a,Cf:b}},bI:function(a){a.ya||(a.status="",a.ya=void 0,a.za=null,a.mc=null,a.Jc&&(a.Jc.mc=null,a.Jc.Jc=null,a.Jc=null),this.Ba.dm(a.key))},HM:function(a,b){return{j$:"3D"===this.q.j.O.view.type,G6:this.q.De,Zy:f.w.Zy||null,Sfa:this.q.get("businessIconsID"),nk:this.nk,Ir:this.Ir,cha:this.q.get("iconsID"),AH:this.q.ce,wv:a,Kd:b,Y:this.q.get("forceBig")||f.l.Y, mode:this.q.get("mode"),sba:f.w.bc,SU:this.q.get("forceBig")?1:this.q.gb,ls:this.q.get("forceBig")?!1:this.q.ga}},L7:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},$H:function(a,b,c){if(this.q){for(var d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.nk=h["x-vd-v"],this.Ir=h.tv,this.Pk=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.j.nd!==h&& (this.j.nd=h))):this.oA(h,b,d))}if(d.length){var k=this;a=null;var l;this.Qh?(a=f.AB,l=a.qI):(a=f.Cn,l=this.qn?a["label:parseLabel"]:a["base:parseData"]);k.q.get("iconsID");k.q.get("businessIconsID");k.q.get("mode");(function(){l(k.HM(b,d),function(a,c){if(k.q&&!a){var d=c.icons;if(d)for(var e=0;e<d.length;e+=1)f.Ph.Hl(d[e]);(f.l.Ee||f.l.Ij&&!k.j.O.ya)&&(k.qv||!k.SJ)&&18>=b&&f.eo.set({Kd:c.data.Kd,"x-vd-v":k.nk,tv:k.Ir,bgc:k.j.nd,Pk:k.Pk,Bf:!!k.Qh,url:k.wr(10,[]),D:k.q,De:k.j.O.get("showBuildingBlock")}, function(){});c.data&&k.pA(c.data)}})})()}}},oA:function(a,b,c){function d(d,e,g){e=[g,d,e].join("/");18<b&&!l.Qh&&(e+="/"+b);if((d=l.Ba.get(e))&&"loaded"!==d.status)if(l.SV(d,p)){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Hi=e,"string"===typeof e.b&&(e.b=l.L7(e.b)),g="",g="object"===typeof e.u?e.u.url:e.u)d={url:g,Es:"limg-"+d.key+"-"+l.q.ce},e.u=d,f.Ph.Hl(d,!0)}else{e={Ni:d.ja,Oi:e,Ja:a,yd:m,mQ:l.j.nd,m$:"building"===m,ih:"poilabel"===m||"roadlabel"===m||"building"===m&&l.q.De};if("poilabel"=== m||"roadlabel"===m)e.Hi=d.Hi;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.aJ(b,d,p,f.a.bind(l.bI,l)),18<b&&l.Ba.dm(e)}var e=a[0].split("-"),g=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.q.Oa,p=18<b?Math.pow(2,b-18):1,e=l.Ae.ZG,q=Math.pow(2,k);10>k&&(g<=e&&d(g+q,h,k),g>=q-e&&d(g-q,h,k));d(g,h,k)},AI:function(a){this.Eo||(this.Eo=[]);this.Eo.push(a)},Lh:function(){if(this.Eo&&this.Eo.length){for(var a=0,b=this.Eo.length;a<b;a+=1)this.xo.iz.apply(this.xo,this.Eo[a]); this.Eo=[]}},rt:function(a,b,c){c||(c=18<b?Math.pow(2,b-18):1);for(var d=0;d<a.length;d+=1){var e=a[d];this.aJ(b,e,c,f.a.bind(this.bI,this));18<b&&this.Ba.dm(e.key+"/"+b)}f.l.Ee&&f.eo.dm({xs:a,url:this.wr(b,[]),D:this.q,Bf:!!this.Qh,De:this.j.O.get("showBuildingBlock")})},wr:function(a,b){return this.q.url+b.join(";")+"&lv="+a},LM:function(){var a=this.q.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},HH:function(a,b,c){function d(c,d){if(b!==h.kb)h.rt(a,b,k),e.eM=!0,e.startTime|| (e.onreadystatechange="");else{var g=c.split("|");g[0]=d+g[0];var p=g,q="";g[g.length-1]&&(q=g[g.length-1],p=g.splice(0,g.length-1));h.$H(p,b,!0);return q}}var e=new XMLHttpRequest;c=this.wr(b,c,a);var g=0,h=this;e.xA="";var k=18<b?Math.pow(2,b-18):1;e.onreadystatechange=function(){if(h.q)if(3===e.readyState){if(!e.eM){var c=e.responseText.substring(g);e.xA=d(c,e.xA);g=e.responseText.length;e.NL=!0}}else 4===e.readyState&&(f.md.Fd.end({key:h.LM(),index:0,id:h.j.O.id}),e.eM||(c=e.responseText.substring(g), h.qn&&(c+="|"),d(c,e.xA),e.xA="",e.NL=!0),e.startTime&&f.md.Fd.push({id:h.j.O.id,key:"ds",fm:e.responseText.length/2}),e.NL||h.rt(a,b,k))};e.onerror=function(){};this.O9||(this.O9=1);e.open("GET",c,!0);e.send()},SV:function(a,b){var c=this.Qk||this.Ae,d=a.ja.x,e=a.ja.y;return d>Math.floor(c.Jd/b)||d<Math.floor(c.fe/b)||e>Math.floor(c.vd/b)||e<Math.floor(c.wd/b)?!1:!0},aJ:function(a,b,c,d){if(18<a){b=b.ja;for(var e=0;e<c;e+=1)for(var g=0;g<c;g+=1){var h=new f.di(a,c*b.x+e,c*b.y+g)+"";(h=this.Ba.get(h))&& d(h)}}else d(b),b.Jc&&d(b.Jc)}};f.R.canvas.uh=f.R.th.extend({ea:[f.Ys],B:function(a,b){arguments.callee.oa.apply(this,arguments);this.ce=f.a.Fb(this);this.Xk=300;this.Wd=a.Wd;this.qn=this.Ng=!0;this.X("mapStyle",a.j);this.X("style",a.j);this.qv=!0;this.Vq=1;var c=this;this.$M=function(){c.gaa=!0;c.set("display",0)};this.Le();this.FH(a)},FH:function(a){a=f.l.Y||a.ga?"big":"small";var b=f.w.bc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";f.Ph.Hl(f.w.bc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png",!0);f.Ph.Hl(b,!0)},pt:function(a){f.Ph.Y6(a, this);var b=f.R.canvas.uh.Kc.pt;b&&b.apply(this,arguments)},Le:function(){this.cj=document.createElement("canvas");this.cj.className="amap-labels";this.cj.draggable=!1;this.cj.RS=!0;this.ki=this.cj.getContext("2d",{alpha:!0});this.hv=[];this.vv=[];this.ln=this.q.ga?16:8},Jp:function(a){var b=Math.pow(2,a.U.zoom-this.vc),c=this.q.ga?this.q.gb:1,d=a.U.Ua.Sa(this.tn).ec(this.Xd);this.transform={translate:this.transform.translate.add(d.bd(c)),scale:b/c,rotate:0};this.Ua=a.U.Ua},js:function(a,b){if(!this.la|| 3E4<Math.abs(this.Ua.x-this.la.x)/this.Q||3E4<Math.abs(this.Ua.y-this.la.y)/this.Q)this.la=this.Ua;this.Ld=this.vc;this.mh=this.Xd;this.lh=!1;this.currentTime=+new Date;this.TJ=b.TJ;this.ed=[this.pa.qb.x,this.pa.qb.y];this.gi=b.Vy;var c=this.$h;this.ke=this.zoom<<0!==this.zoom;var d=this.Ua.Sa(this.la);d.x<-f.a.Ya/2&&(d.x+=f.a.Ya);d.x>f.a.Ya/2&&(d.x-=f.a.Ya);this.DF=d.ec(this.Xd);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var g=e[0].ja.z,h=!1;!1===a.jQ||!e.vf||f.Pa.Cd||!(g<=this.zoom&&"in"=== this.qA||g>=this.zoom&&"out"===this.qA)&&this.qA||this.labels&&this.labels.length&&!a.Ii&&this.zA(this.labels.ws,this.Ae)||(h=!0,this.labels&&this.labels.Hj?(this.un=this.labels.Hj,this.un.zoom=this.labels.zoom):(this.un=[],this.un.zoom=null),this.labels=[],this.labels.zoom=g,this.labels.ws=this.Ae);if(h){for(g=e.length-1;0<=g;g-=1){var k=e[g],h=!1,l=k.Oa;!l&&k.Jc&&k.Jc.Oa&&(l=k.Jc.Oa,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.Kk>b.Kk?-1:a.pe>=b.pe?-1:1})}}}this.O6(a)&&this.MI(a);this.gaa=!1;this.Ed(a);this.vf&&!this.q.ya&&(c=this.q,f.md.Fd.end({id:this.j.O.id,key:"rl",index:2}),c.ya=!0,c.Fc?c.da("renderComplete"):(c.Fc=!0,c.da("complete")))},Xb:function(a,b){this.yn=a.yn;this.Ti=a.Ti;this.Jk(a,b);this.ke||this.Lh();this.tn&&(a.XV||a.xJ&&f.l.dh||a.Pe&&!a.ke&&a.u6)?this.Jp(a,b):this.js(a,b);this.tn=this.Ua;this.xl=this.labels;this.lh&&this.set("display",0)},Ed:function(a){var b=this.Ua.Sa(this.la);b.x<-f.a.Ya/ 2&&(b.x+=f.a.Ya);b.x>f.a.Ya/2&&(b.x-=f.a.Ya);this.transform={translate:new f.I(a.U.pa.Gb.x*(this.q.ga?this.q.gb:1),a.U.pa.Gb.y*(this.q.ga?this.q.gb:1)),scale:1/(this.q.ga?this.q.gb:1),rotate:0}},zA:function(a,b){return a.wd===b.wd&&a.fe===b.fe&&a.vd===b.vd&&a.Jd===b.Jd},zr:function(a,b){var c;if(this.zoom){var d=a.ec(Math.pow(2,20-this.zoom));this.labels&&(c=this.l9(d,b))&&(c.uH=!1);!c&&this.fc&&(c=this.k9(d))&&(c.uH=!0)}return c?[c]:[]},l9:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Hj||this.labels, g=e.length-1;0<=g;g-=1){var h=e[g],k=h.Na[0]/this.Q,l=h.Na[1]/this.Q;if((h.Rl||!b)&&this.MS(h,c,d,k,l))return h}},k9:function(a){var b=a.x;a=a.y;for(var c=this.fc.length-1;0<=c;c-=1){var d=this.fc[c],e=d.Na[0]/this.Q,g=d.Na[1]/this.Q;if(d.Rl&&this.MS(d,b,a,e,g))return d}},MS:function(a,b,c,d,e){for(var g=0;g<a.Jb.length;g+=1){var h=a.Jb[g][2],k=a.Jb[g][3],l=a.Jb[g][0],m=a.Jb[g][1];this.q.ga&&(h/=this.q.gb,k/=this.q.gb,l/=this.q.gb,m/=this.q.gb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1}, reloadChanged:function(){this.q&&(this.q.ya=!1);this.Ba.clear();this.labels=[];this.hv=[];this.vv=[];this.ob&&this.ob.parentNode&&this.ob.parentNode.removeChild(this.ob);this.cj&&this.cj.parentNode&&this.cj.parentNode.removeChild(this.cj);this.set("display")},Jg:function(){return this.cj},vG:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Nb){var e="",g="",h="";d.xd&&(h=d.xd[0],e=h[3],g=h[4],h=d.Gi?"":h[7]);if(e=this.T.xr&&this.T.xr(e,g,h,d.Nb))d.visible= e[4],d.Ok=e[3];if(d.xd)for(g=0;g<d.xd.length;g+=1)h=d.xd[g],h[3]=e[0],h[4]=e[1],h[7]=e[2]}}}});f.NK={wr:function(a,b){return this.q.up+b.join(";")+"&lv="+a},$H:function(a,b){if(this.q){for(var c=[],d=0,e=a.length;d<e;d+=1){var g=a[d];g&&(g=JSON.parse(g),g["x-vd-v"]?(this.nk=g["x-vd-v"],this.Pk=[g.tv||"",g.vdv].join("-"),this.Ir=g.tv,this.j.nd="#"+g.bgc.substring(2)):(this.oA(g,b,c,this.nk||"v4"),(f.l.Ee||f.l.Ij&&!this.j.O.ya)&&18>=b&&f.eo.set({Hi:!0,data:g,url:this.wr(b,[]),Oi:g[0].split("-").slice(0,3).join("/"),D:this.q,vdataVersion:this.Pk,"x-vd-v":this.nk,tv:this.Ir,bgc:this.j.nd,De:this.j.O.get("showBuildingBlock")})))}this.set("display")}}, mU:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.Q;return[(c+a[0])*e,(d+a[1])*e]},oA:function(a,b,c,d,e){function g(c,g,l){if(c=p.Ba.get([l,c,g].join("/"))){g=c.ja;var m=f.w.bc+"://vdata.amap.com/icons/"+(h||k?"b":"n")+(10>g.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(p.SV(c,t)){if(-1!==r.indexOf(q))if("limg"===q)a[1]&&(c.Hi={url:"data:image/png;base64,"+a[1],Es:"limg-"+c.key+"-"+p.q.ce},f.Ph.Hl(c.Hi,!0));else{if("roadlabel"===q)for(var n=1;n<a.length;n+=1){var x=a[n];x.fB=x[0];var J= f.a.OJ(x[1],d);if(!(0>J[0]||256<=J[0]||0>J[1]||256<=J[1])){var L=p.mU(J,g),J={Na:L,name:x[0],Gi:!0,Zd:J,Pa:[],Jb:[],visible:!0,Ok:!0},M=J.name;J.ns=15>x[2]%90||75<x[2]%90?90*Math.floor((x[2]+15)/90):x[2];L=x[3];0<=x[8]&&(J.GE={name:x[6],ida:x[7],dir:x[8]});var T=L[2];l=L[3];var Z=-Math.floor(l/2);if(x[4])if("v5"<=d){var B=x[5].split(":"),F=B[1],F=parseInt(F)-1,B=f.w.bc+"://vdata.amap.com/style_icon/icon-normal-"+(h||k?"big":"small")+".png";J.Pa.push(B);var B=Math.floor(F/10),C=F%10,E=0,I=0,W=0;k? (E=48,W=I=40):h?(E=I=40,W=36):(E=I=24,W=20);var H=E*Math.max(T+2,W)/W,B=[-H/2,-E/2,H,E,I*C,I*B,I,I];J.pe=7;J.Jb.push(B)}else{Z=!1;F=parseInt(x[5]);153===F&&(0===M.indexOf("G")?(F="153g",Z=!0):0===M.indexOf("S")&&(F="153s",Z=!0));if(151===F||150===F)Z=!1,0===M.indexOf("G")&&(F=150,Z=!0),0===M.indexOf("S")&&(F=151,Z=!0);152===F&&(F=151);!0===Z&&(m=f.w.bc+"://webapi.amap.com/theme/v1.3/icons/"+(h||k?"b/":"n/"));B=m+F+".png";f.Ph.Hl(B);J.Pa.push(B);H=x[4][0]*u;x=x[4][1]*u;B=[-H/2,-x/2,H,x];J.Jb.push(B); T=Math.min(H-3,T);l=Math.min(x,l);Z=-Math.floor(l/2)+(k?3:1)}J.Pa.push(c.Hi);J.pe=11;J.Jb.push([-Math.floor(T/2),Z,T,l,L[0],L[1],L[2],L[3]]);c.Oa||(c.Oa=[]);c.Oa.push(J)}}else if("poilabel"===q){M=[];for(n=1;n<a.length;n+=1)if(x=a[n],x.fB=x[0],J=f.a.OJ(x[1],d),!(0>J[0]||256<=J[0]||0>J[1]||256<=J[1])){L=p.mU(J,g);J={Na:L,name:x[0].replace("^",""),Lr:!0,Zd:J,Pa:[],Jb:[],visible:!0,Ok:!0};F=0;J.Kk=x[8];x[6]&&("v5"<=d?(B=x[6].split(":"),F=B[1],Z=Math.floor((parseInt(B[0].split("_")[1])-28)/2)):F=x[6]); if(F&&x[3]){if("v5"<=d){B=f.w.bc+"://vdata.amap.com/style_icon/icon-"+(1===Z?"biz-":"normal-")+(h||k?"big":"small")+".png";J.Pa.push(B);F=parseInt(F)-1;B=Math.floor(F/10);C=F%10;k?(E=48,I=40,W=28):h?(E=I=40,W=28):(E=I=24,W=20);H=E;if(151===F||152===F||153===F)W-=4,T=x[7][0][2],H=E*Math.max(T+2,W)/W;B=[-H/2,-E/2,H,E,I*C,I*B,I,I]}else B=m+F+".png",f.Ph.Hl(B),J.Pa.push(B),B=[-Math.round(x[3][0]/2),-Math.round(x[3][1]/2),x[3][0],x[3][1]],k&&!e&&(B[0]*=u,B[1]*=u,B[2]*=u,B[3]*=u);J.Jb.push(B)}if(x[2]&& x[7])for(T=x[2],B=0;B<x[2].length;B+=1){J.Pa.push(c.Hi);L=x[7][B];k&&!e&&(T[B][0]=Math.round(T[B][0]*u),T[B][1]=Math.round(T[B][1]*u),T[B][2]=Math.round(T[B][2]*u),T[B][3]=Math.round(T[B][3]*u));H=T[B][0];C=T[B][1]-(k?4:2);E=L[3];I=L[2];H<-I&&F&&x[3]&&(H=-I+J.Jb[0][0]);if("v5">d){if("375"===F||"3751"===F)I=Math.min(T[B][2],k?24:14),H=-Math.floor(I/2),C=-Math.floor(E/2)}else H-=2;J.pe=E-4;4===l&&"\\u5317\\u4eac"===J.name&&(C=k?-50:-26);J.Jb.push([H,C,I,L[3],L[0],L[1],L[2],L[3]])}J.qp=x[5];J.qp&&M.push(J.qp); J.Rl=x[4];J.Nl=x[9];J.rT=x[10];J.ye=F;J.Hr=Z;c.Oa||(c.Oa=[]);c.Oa.push(J)}c.Wf||(c.Wf={},c.Wf.de=M)}q===r[r.length-1]&&(c.status="loaded",c.ya=c.za=!0,c.Jc&&(c.Jc.ya=c.Jc.za=!0))}}else p.aJ(b,c,t,f.a.bind(p.bI,p))}}var h=f.l.Y,k=this.q.ga,l=a[0].split("-");1===l.length&&(l=a[0].split("_"));c=parseInt(l[1]);var m=parseInt(l[2]),n=parseInt(l[0]),p=this,q=l[3],r=this.q.Oa,t=18<b?Math.pow(2,b-18):1,l=Math.ceil(p.Ae.ZG),u=this.q.ga?this.q.gb:1,x=Math.pow(2,n);10>n&&(c<=l&&g(c+x,m,n),c>=x-l&&g(c-x,m,n)); g(c,m,n)}};f.R.canvas.aC=f.R.canvas.uh.extend({ea:[f.NK]});f.R.canvas.uh.fb({MI:function(a){this.Vq++;var b=this.cj,c=this.ki;this.Cr={};var d=this.q.ga?this.q.gb:1,e;0!==a.U.rotation?(e=2*Math.floor(a.U.pa.Gb.x)*d,d*=2*Math.floor(a.U.pa.Gb.y)):(e=a.size.width*d,d*=a.size.height);f.g.Mk(b,e,d,!0);c.textBaseline="bottom";this.qS=0;a.fc&&(this.nU(a.fc,1,a.fc),0===a.fc.length&&this.labels&&this.labels.Hj&&this.labels.zoom===this.zoom&&this.labels.Hj.length!==this.labels.length&&(this.labels.Hj=null));this.labels&&this.nU(this.labels,0,a.fc);!f.l.Y&&this.un&& this.un.length&&this.j9(a);this.hv=this.hv&&this.EU(c,this.hv,480);this.vv=this.vv&&this.EU(c,this.vv,200);a.fc&&this.HU(a.fc,c,f.pg.MR(this.j.O),this.Vb,e,d);this.labels&&this.HU(this.labels,c,f.pg.MR(this.j.O),this.Vb,e,d);this.un=[];this.labels&&(this.labels.ks=this.zoom,this.labels.hs=this.Ua,this.labels.Yv=this.rotation,this.labels.JU=this.q.ga,this.labels.size=a.size);a.fc&&(this.fc=a.fc);this.fc&&(this.fc.ks=this.zoom,this.fc.hs=this.Ua,this.fc.Yv=this.rotation,this.fc.size=a.size);this.r("afterLabelRender")}, FU:function(a,b,c){var d=void 0===b.Ok?!0:b.Ok,e=1,g=void 0===b.visible?!0:b.visible,h=null;if(b.Nb&&this.j.Wb){var k=h="",l="";b.xd&&this.cG&&(l=b.xd[0],h=l[3],k=l[4],l=b.Gi?"":l[7]);if(h=this.T.xr&&this.T.xr(h,k,l,b.Nb))g=h[4],d=h[3],e=h[5]}if(g){if(this.ki.globalAlpha!==c||e)this.ki.globalAlpha=c||e;g=0;for(k=b.Pa.length;g<k;g+=1)(d||"CANVAS"===b.Pa[g].tagName)&&this.f8(a,b.Pa[g],b.Jb[g],b.ns,c||e);this.ki.globalAlpha!==c&&(this.ki.globalAlpha=c);b.xd&&this.cG&&this.cG(a,b,h)}},f8:function(a,b, c,d){var e=this.ki;b=this.zl(b);if(!b)return 1;var g=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,g,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,g,h);0!==d&&e.setTransform(1,0,0,1,0,0)},zl:function(a){if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=f.Ph.CR(a))&&a.loaded)return a},Jz:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.Ya/2?c-= f.a.Ya:c<-f.a.Ya/2&&(c+=f.a.Ya));return this.Jh(c,b[1])},Jh:function(a,b){var c=this.q.ga?this.q.gb:1,d=this.Q,e=0,g=0,e=(a-this.ed[0])/d,g=(b-this.ed[1])/d;return[Math.round(e*c),Math.round(g*c)]},q9:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.Ya/2?c-=f.a.Ya:c<f.a.Ya/2&&(c+=f.a.Ya));return[c/this.Q,b[1]/this.Q]},u$:function(a,b){var c=a.Na;return c[0]>b.tc.x||c[1]>b.tc.y||c[0]<b.qb.x||c[1]<b.qb.y?!1:!0},j9:function(a){var b=this.un;if(this.un.zoom!==this.labels.zoom)for(var c=0,d=b.length;c< d;c+=1){var e=b[c];e.Lr&&this.u$(e,a.U.pa)&&(this.vv.push(e),e.zoom=b.zoom,e.gH=new Date)}},nU:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,g=a.Hj||a;if(0<e||d){a.Hj=[];for(var h=0,k=g.length;h<k;h+=1){var l=g[h],m=this.q9(l);l.Lr||b?l.qp&&d&&c.AT&&-1!==f.a.indexOf(c.AT,l.qp)||(5>e&&this.Z9(m,l,0<e,b,d)?a.Hj.push(l):f.l.Y||0===e&&!b||(this.hv.push(l),l.zoom=this.labels?this.labels.zoom:this.vc,l.gH=new Date)):l.Gi&&a.Hj.push(l)}}else a.Hj=a;return!1},EU:function(a,b,c,d,e){a=new Date; for(var g=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.gH)/(1/Math.pow(1.3,m)*c));if(0<m){g.push(l);var n=this.Jz(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.FU(n,l,m)}else l.gH=void 0}g.length&&(this.qS=this.lh=1);return g},HU:function(a,b,c,d,e,g){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Hj;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Gi||k.Yk&&c&&0<=c.indexOf(k.Yk))){var l=this.Jz(k);-20>l[0]|| l[0]>e+20||-20>l[1]||l[1]>g+20||this.FU(l,k)}}},O6:function(a){this.xl&&this.xl.JU!==this.q.ga&&this.q.set("reload");if(this.qS)return!0;if(a.fc&&a.fc.length)if(this.fc&&this.fc.length){if(this.fc!==a.fc||this.fc.ks!==this.zoom||this.fc.hs!==this.Ua||this.fc.Yv!==this.rotation||!this.fc.size.yb(a.size))return!0}else return!0;else if(this.fc&&this.fc.length)return!0;return!this.labels||!this.j.vR&&this.labels===this.xl&&this.xl&&this.xl.ks===this.zoom&&this.xl.hs===this.Ua&&!a.Ii&&this.xl.Yv===this.rotation&& this.xl.JU===this.q.ga&&this.xl.size.yb(a.size)?!1:!0},Z9:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var g;e=b.Pa.length;if(b.Nl>this.zoom)g=!0;else if(!c&&d)g=!1;else for(var h=0;h<e;h+=1){var k=b.Jb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.a$(n,k,l,m)||(g=!0)}if(!g&&(c||d))for(h=0;h<e;h+=1)for(k=b.Jb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.ln),c=Math.ceil((k+m)/this.ln),n=Math.floor(n/this.ln),k=Math.floor(k/this.ln),d=0,m=l-n;d<=m;d+=1)for(var l=0,p= c-k;l<=p;l+=1)this.Cr[n+d]||(this.Cr[n+d]={}),this.Cr[n+d][k+l]=1;return!g},a$:function(a,b,c,d){var e=Math.ceil((a+c)/this.ln);d=Math.ceil((b+d)/this.ln);a=Math.floor(a/this.ln);b=Math.floor(b/this.ln);c=0;for(e-=a;c<=e;c+=1)if(this.Cr[a+c])for(var g=0,h=d-b;g<=h;g+=1){if(1===this.Cr[a+c][b+g])return!1}else this.Cr[a+c]={};return!0}});f.R.canvas.uh.XW=f.Z.extend({B:function(a){this.R=a},f5:function(a){this.yn=a;return this.IE([0,0,0])?!0:this.yn=!1},oN:function(){return this.R.ke?!1:!0},p0:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.s0.apply(this,b);case "label":return this.t0.apply(this,b);default:console.error("Unknown type",a)}}},DM:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},B5:function(a){return 0>a?0:255<a?255: Math.round(a)},MP:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.B5(a[b+c]);return a},HE:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},W4:function(a){return[255-a[0],255-a[1],255-a[2]]},IE:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.yn){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},u0:function(a,b){var c=20,d=10;switch(b.vk){case "active":c+=20,d+=20}return this.HE(this.IE(a,c),d)},YM:function(a,b){var c=-110;switch(b.vk){case "active":c+=30}return this.HE(this.IE(this.W4(a),c),50)},r0:function(a){return this.HE(a,20)},XM:function(a, b,c,d,e,g){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],g),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.MP(c,d)},I_:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,g=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.jD(k,l,c,a);if(!(76.5>b[m+3])){e++;k<g[0]&&(g[0]=k);l<g[1]&&(g[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{pea:0<e?d/ e:0,l7:[g[0],g[1],h[0]-g[0]+1,h[1]-g[1]+1]}},jD:function(a,b,c){return b*c+a},vy:function(a,b,c,d,e,g,h){var k=this.jD(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.uT||h.MV&&!h.MV.call(this,d,e,l,a))return!1;g.push([b,c]);return!0},c4:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Oq:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},p5:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var g=a[d];this.c4(g,c[c.length- 1])<=b&&c.push(g)}return this.Oq(c[c.length-1],a[a.length-1])?c:null},zfa:function(){},hZ:function(a,b,c,d){d=f.extend({uT:0.2,pT:4},d);var e,g,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(g=0;g<b&&!this.vy(a,g,e,b,c,h,d);g++);for(g=b-1;0<=g&&!this.vy(a,g,e,b,c,k,d);g--);}if(!h.length||!k.length)return null;for(g=0;g<b;g++){var n;e=h[0][0];n=k[0][0];if(g>=e&&g<=n)for(e=0;e<c&&!this.vy(a,g,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(g>=e&&g<=n)for(e=c-1;0<=e&&!this.vy(a,g,e,b,c,m,d);e--); }if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Oq(l[l.length-1],k[0])&&this.Oq(k[k.length-1],m[0])&&this.Oq(m[m.length-1],h[0])&&this.Oq(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.p5(b[e],d.pT),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},r_:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var g=a[d][0],h=a[d][1]; b[0]>g&&(b[0]=g);b[1]>h&&(b[1]=h);c[0]<g&&(c[0]=g);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},NM:function(a,b){this.EP||(this.EP=document.createElement("canvas"));var c=this.EP;c.width=a;c.height=b;return c},O_:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},jM:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},tL:function(a,b){a.beginPath();for(var c=0,d=b.length;c< d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.jM(e))):a[this.O_(e)].apply(a,this.jM(e))}},v_:function(a){a=this.YM([255,255,255],{vk:a.vk});this.MP(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},q0:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=f.extend({vk:"hover",dQ:!0,padding:[1.5,1.5]},c);var e=a.width,g=a.height,h=this.NM(2*e+10,g),k=h.getContext("2d"), l=this.r_(b),m=c.padding;f.l.kd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,t=b.length;l<t;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.tL(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,g,0,0,e,g);a=c.dQ&&10<b.length;var u=c.strokeStyle||this.v_(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=f.l.kd?2:1.2;k.stroke();k.restore();return{za:h,wf:[0,0,e,g],Je:a?function(a,c){this.r5(a,c,b,u)}:null}},r5:function(a,b,c,d){this.lZ();var e=this.R.Vq;this.kL(a,c,{duration:200,sI:0,startTime:Date.now(),xca:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=f.l.kd?2:1;a.translate(b[0],b[1])},qea:function(){return this.R.Vq!==e}})},lZ:function(){this.pC&&f.a.$f(this.pC)},kL:function(a,b,c,d){this.oN()?this.pC=f.a.cc(function(){this.pC= null;if(c.qea.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var g=Math.round(b.length*e);if(c.sI<g){var h=1===e?b:b.slice(c.sI,g+1);h.length&&(a.save(),c.xca.call(this,a,e),this.tL(a,h),a.stroke(),a.restore());c.sI=g}1>e?this.kL(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},uZ:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,g=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.jD(c, m,e,g),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},d1:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},N0:function(a,b,c){for(var d=1/c,e=[],g=1;g<c;g++){var h=this.d1(a,b,d*g);e.length&&this.Oq(h,e[e.length-1])||e.push(h)}return e},O0:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],g=a[c];2===g.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.N0(e,g,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},R_:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.O0(a,5);return a},s0:function(a,b,c,d,e,g){b=a.wf;var h=c?c.mH:this.DM(d,e,b);if(h){var k=c?c.tS:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.uZ(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.R.j)&&c.O?c.O.get("hotspotOptions"): {};c=f.extend({borderAnimation:!0},c);l=this.I_(l);a=!a.o$&&0.46<=l.pea;var r=e.createImageData(b,q);e=r.data;for(var t=a?this.YM:this.r0,u=0,x=d.length;u<x;u+=4)this.XM(d,u,e,u,t,{vk:g});if(m&&(e=a&&!f.l.kd?this.hZ(d,b,q,{MV:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,uT:0.2,pT:4}):null,e||(e=l.l7,e=this.R_(e[0],e[1],e[2],e[3],0.2)),e)){var v=this.q0(r,e,{vk:g,fillStyle:"active"!==g?null:"#ddd",kA:h,dQ:c.borderAnimation&&"hover"===g&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{kA:h, is:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(v.za,v.wf[0],v.wf[1],v.wf[2],v.wf[3],b[0],b[1],b[2],b[3]);v.Je&&(v.Je.call(this,a,b),v.Je=null)}}}return{kA:h,is:function(a,b){if(m){var c=this.NM(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},t0:function(a,b,c,d,e,g){a=a.wf;if(c=c?c.mH:this.DM(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.XM(d,a,e,a,this.u0,{vk:g});return{kA:c,is:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},PM:function(a,b,c){var d=c[2],e=c[3],g=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.jN){if((b=this.R.zl(b))&&b.loaded)return c=[4,4],f.l.kd&&(c[0]*=2,c[1]*=2),{type:"icon",o$:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,wf:[g-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",wf:[g,a,d,e]}}}); f.R.canvas.uh.fb({BM:function(){this.sD||(this.sD=new f.R.canvas.uh.XW(this));return!1===this.sD.f5(this.yn)?null:this.sD},mo:function(a,b){var c=this.BM();if(c&&c.oN()&&a&&a.Pa&&a.Jb&&0===this.rotation){var d=this.Vq,e=this.Jz(a),g=[],h;a.zm||(a.zm=[]);var k=a.zm;for(h=a.Jb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].tS===b)continue}var l=c.PM(e,a.Pa[h],a.Jb[h]);if(l){var m=c.p0(l,a,k[h],this.cj,this.ki,b);m&&(k[h]={tS:b,rev:d,mH:m.kA},g.push({is:m.is,wf:l.wf,Pv:"icon"===l.type? 2:1}))}}g.sort(function(a,b){return a.Pv-b.Pv});h=0;for(d=g.length;h<d;h++)g[h].is.call(c,this.ki,g[h].wf),g[h].is=null}},kt:function(a){a.zm&&(a.zm.length=0,a.zm=null)},xy:function(){var a=this.ki;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},Cy:function(a){if(a&&a.Pa&&a.Jb&&a.zm){var b=this.ki,c=this.BM();if(c){for(var d=this.Vq,e=this.Jz(a),g=a.zm,h=0,k=a.Jb.length;h<k;h++){var l=g[h];if(l&&(g[h]=null,d===l.rev)){var m=c.PM(e,a.Pa[h],a.Jb[h]);m&&m.wf&&b.putImageData(l.mH,m.wf[0], m.wf[1])}}a.zm=null;this.Vq++}}}}); ')
_jsload_('overlay', 'f.ka.Rb=f.ka.$n.extend({B:function(a,b){var c=a.length;this.kg=Array(c);for(var d,e,g=0;g<c;g+=1)if(d=a[g],e=new f.ka.AK(d),this.kg[g]=e,!b)if(0===g){if(0===d.length)break;e.nn(d)||d.reverse()}else 0!==d.length&&e.nn(d)&&d.reverse()},Gc:function(){if(0===this.kg.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.Ke){for(var a=this.kg[0].Gc(),b=1;b<this.kg.length;b+=1){var c=this.kg[b].Gc();f.F.TQ(a,c)||f.F.extend(a,c)}this.Ke=a}return this.Ke},aS:function(){return this.kg},fg:function(){return f.ka.zd.Nw}, Tc:function(a){for(var b=this.kg,c,d=0,e=b.length;d<e&&(c=b[d].Tc(a),0<d&&(c=!c),c);d+=1);return c}});f.ka.hq=f.ka.$n.extend({B:function(a){var b=a.length;this.ve=Array(b);for(var c=0;c<b;c+=1){var d=new f.ka.Rb(a[c]);this.ve[c]=d}},Gc:function(){if(!this.Ke){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ve,c=0,d=b.length;c<d;c+=1)f.F.extend(a,b[c].Gc());this.Ke=a}return this.Ke},EG:function(){return this.Na},fg:function(){return f.ka.zd.Lw},FR:function(){return this.ve},Tc:function(a){for(var b=!1,c=0,d=this.ve.length;c<d;c+=1)if(this.ve[c].Tc(a)){b=!0;break}return b}});f.ka.im=f.ka.$n.extend({B:function(a){this.Na=a},Gc:function(){if(!this.Ke){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.Na.length;b<c;b+=1)f.F.uz(a,this.Na[b]);this.Ke=a}return this.Ke},EG:function(){return this.Na},fg:function(){return f.ka.zd.LB},a9:function(){return this.Na.length},qr:function(a){return f.zc.Vm(a,this.Na)}});f.ka.AK=f.ka.im.extend({fg:function(){return f.ka.zd.yK},nn:f.zc.nn,Tc:function(a){return f.zc.Tc(a,this.Na)}});f.ka.Vs=f.ka.$n.extend({B:function(a){var b=a.length;this.ve=Array(b);for(var c=0;c<b;c+=1){var d=new f.ka.im(a[c]);this.ve[c]=d}},FR:function(){return this.ve},Gc:function(){if(!this.Ke){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ve,c=0,d=b.length;c<d;c+=1)f.F.extend(a,b[c].Gc());this.Ke=a}return this.Ke},EG:function(){return this.Na},fg:function(){return f.ka.zd.RB},a9:function(){return this.Na.length},qr:function(a){for(var b=Infinity,c=0,d=this.ve.length;c<d;c+=1)b=Math.min(b,this.ve[c].qr(a)); return b}});f.C.Lb=f.C.Pf.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.h6=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.Jo();this.X("display",b);b.h("zoomend",this.ik,this)},nl:function(){if("3D"==this.map.O.view.type){var a=this.K;a&&(a=a.Da)&&(delete a.Ja,delete a.nr)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},Bn:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),b=a.bd(b), d=[],e,g,h;e=0;for(g=c.length;e<g;e+=1)h=this.map.Ob(c[e]).add(b),d.push(this.map.Dd(h));0<d.length&&this.set("path",d);if(this.tE&&0<this.tE.length)for(e=0,c=this.tE.length;e<c;e+=1)this.tE[e].Bn(a);this.h6.r("movepoly",{as:b})},Dv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])},yt:function(a){this.get("options");return this.P0()?this.E_(a):this.eD(a)},P0:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, E_:function(a){if(!a||!a.length)return[];var b,c=[],d,e,g=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);g.push(this.fD(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.fD(a[d]),b=Math.round(Math.abs(h[0]-g[g.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].L-a[d].L))),"3D"==this.map.O.view.type&&(b=Math.round(b/1.2)),b=f.W.r9(a[d-1],a[d],b),c.push.apply(c,b),g.push.apply(g,this.eD(b)),c.push(a[d]),g.push(h);return g},Xy:function(a){var b= [],c=[],d,e,g,h,k,l,m=a.Da;m instanceof f.ka.im?l=[m]:m instanceof f.ka.Vs&&(l=m.ve);m=[];a=a.Ca.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(g=l[d].Na,g.length)for(h=0,k=g.length;h<k;h+=1)if(b=g[h],b=this.se(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},Jo:function(){if(this.map&&!this.K){var a=this.map,b=this.get("path"),b=this.K=new f.mf({aD:this.Oc.Mx,name:"polyline-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Da:new f.ka.im(this.yt(b)),style:this.get("options")});b.Dm=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.Sd("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){this.nl(); var a=this.K,b=this.get("path");a&&(this.set("coords",this.yt(b)),a.dg=!0,"c"!==this.map.get("overlayRender")&&a.Ca?(b=this.Xy(a),f.l.Bk||b.push("e"),b=b.join(" "),0===b.length&&a.Ca?(a.Ca.qe.parentNode.removeChild(a.Ca.qe),a.Ca.Ib.parentNode&&a.Ca.Ib.parentNode.removeChild(a.Ca.Ib),a.Ca=null):f.l.Bk?(a.Ca.qe.setAttribute("d",b),a.Ca.Ib&&a.Ca.Ib.setAttribute("d",b)):(a.Ca.qe.path=b,a.Ca.Ib&&(a.Ca.Ib.path=b))):this.set("display"))},ik:function(){},visibleChanged:function(){this.K&&(this.K.Ca?this.get("visible")? (this.K.Ca.qe.style.display="block",this.K.Ca.Ib&&(this.K.Ca.Ib.style.display="block")):(this.K.Ca.qe.style.display="none",this.K.Ca.Ib&&(this.K.Ca.Ib.style.display="none")):this.set("display"))},optionsChanged:function(){this.nl();this.K&&(this.K.style=this.get("options"),this.K.zIndex=this.get("options").zIndex,this.K.$m(),this.K.Ca&&(this.K.Ca.qe.parentNode&&this.K.Ca.qe.parentNode.removeChild(this.K.Ca.qe),this.K.Ca.Ib&&this.K.Ca.Ib.parentNode&&this.K.Ca.Ib.parentNode.removeChild(this.K.Ca.Ib))); this.set("display")}});f.C.Os=f.C.Lb.extend({B:function(a,b){this.f6=a;arguments.callee.oa.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.ik,this)},eD:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return f.fK.NR(a,this.map.rl,b,this.f6.G)},toleranceChanged:function(){this.pathChanged()},ik:function(){this.pathChanged()}});f.C.Rb=f.C.Pf.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.fQ=a;this.X("options",a);this.X("path",a);this.Jo();this.X("display",b)},nl:function(){if("3D"==this.map.O.view.type){var a=this.K;a&&(a=a.Da.get("rings"))&&f.a.isArray(a)&&a.forEach(function(a){delete a.Ja;delete a.nr})}},deltaPosChanged:function(){this.set("display")},Bn:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.bd(b);var b=[],d,e;c.length&&c[0]instanceof f.W&&(c=[c],e=!0);for(var g= 0,h=c.length;g<h;g+=1){for(var k=c[g],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Ob(k[m]).add(a),l.push(this.map.Dd(d));b.push(l)}0<b.length&&this.set("path",e?b[0]:b);this.fQ.r("movepoly",{as:a})},Dv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.fQ.r("movepoly",{as:c})},yt:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof f.W&&(a=[a]);for(var b,c,d=[],e,g=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0; for(c=k.length;b<c;b+=1){var l=g.Ob(k[b]);e.push([l.x,l.y])}d.push(e)}return d},Jo:function(){if(this.map&&!this.K){var a=this.map,b=this.get("path"),b=this.K=new f.mf({aD:this.Oc.Mx,name:"polygon-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Da:new f.ka.Rb(this.yt(b)),style:this.get("options")});b.Dm=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.Sd(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.K,b=this.get("path"); this.nl();a&&(this.set("coords",this.yt(b)),a.dg=!0,"c"!==this.map.get("overlayRender")&&a.aa?(b=this.Yy(a),0===b.length?(a.aa.parentNode.removeChild(a.aa),a.aa=null):f.l.Bk?a.aa.setAttribute("d",b.join(" ")):(b.push("e"),a.aa.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.K&&(this.K.aa?this.get("visible")?this.K.aa.style.display="block":this.K.aa.style.display="none":this.set("display"))},optionsChanged:function(){this.nl(); this.K&&(this.K.style=this.get("options"),this.K.zIndex=this.get("options").zIndex,this.K.$m());this.set("display")},Yy:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,g,h,k,l,m,n=a.aa.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.Da;a instanceof f.ka.Rb?d=[a]:a instanceof f.ka.hq&&(d=a.ve);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],g=b.kg,h=g.length,0<h)for(var r= 0;r<h;r+=1){var t;k=g[r].Na;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.se(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,t=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;t&&q.push("L"+t[0]+" "+t[1])}return q}});f.C.lf=f.C.Pf.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.g6=a;this.X("center",a);this.X("draggable",a);this.X("radius",a);this.X("options",a);this.Jo();this.X("display",b)},Bn:function(a){var b=this.get("center");a=a.bd(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Ob(b).add(a);b instanceof f.W?this.set("center",this.map.Dd(c)):this.set("center",c);this.g6.r("movepoly",{as:a})},Dv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])}, Jo:function(){if(this.map&&!this.K){var a=this.map,b=a.Ob(this.get("center")),b=this.K=new f.mf({Gt:!0,aD:this.Oc.Mx,name:"circle-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Da:new f.ka.Ve([b.x,b.y]),style:this.get("options")});b.Dm=this;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.Sd("radius center resolution zIndex strokeWeight deltaPos".split(" "),this)}},nl:function(){if("3D"==this.map.O.view.type){var a=this.K;a&&(a=a.Da)&&(delete a.Ja,delete a.nr, delete a.mW)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.K,b=this.map.Ob(this.get("center"));a&&(a.Da.Na=[b.x,b.y],this.nl(),this.set("coords",[b.x,b.y]),this.dg=!0,a.aa?this.uU():this.set("display"))},visibleChanged:function(){this.K&&(this.K.aa?this.get("visible")?this.K.aa.style.display="block":this.K.aa.style.display="none":this.set("display"))},optionsChanged:function(){this.nl();this.K&& (this.K.style=this.get("options"),this.K.zIndex=this.get("options").zIndex,this.K.$m(),this.K.dg=!0,this.set("display"))},xF:function(a){var b=[],c=[],d,c=a.Da;c instanceof f.ka.Ve&&(d=[c]);var c=this.map.get("resolution",Math.floor(this.map.get("zoom"))),e=a.aa.rotation,b=this.map.get("size"),g=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(g))+Math.abs(b.height*Math.sin(g)))/2,g=(Math.abs(b.width*Math.sin(g))+Math.abs(b.height*Math.cos(g)))/2,b=this.se(d[0].Na);b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+ g);a=a.get("remain")?5.23:this.get("radius")/(c*Math.cos(Math.PI*this.get("center").N/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},uU:function(){var a=this.K,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.aa)if(f.l.Bk)b=this.xF(a),a.aa.setAttribute("d",b);else{b=this.map.get("resolution",Math.floor(this.map.get("zoom")));b=this.get("radius")/(b*Math.cos(Math.PI*this.get("center").N/180));a.aa.style.width=Math.round(2*b);a.aa.style.height=Math.round(2* b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.se(a.Da.Na);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.aa.style.top=Math.round(e[1]-b);a.aa.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.K,b=this.get("radius");a&&(this.nl(),a.dg=!0,a.r("rad",{Oj:b}),this.uU())}}); ')
_jsload_('wgl', '(function(){if(f.l.Yl){var a=function(a){function c(a,b,c,d,g,h){c=a.Ja;d=[];var k=a.Ni,l=null,m=null;a.Ja=[];h=h&&16<b;for(var n=1,q=c.length;n<q;n+=1){var p=c[n],s=p[1].split("&"),l=r(y?y:s[0]),m=r(s[4]),v=p[2],A=p[0],U=p[3]*Math.pow(2,2),K=p[4],$={};if((p=p[5])&&p.length)for(var R=0,G=p.length;R<G;R+=1)for(var N=p[R].split("-")[1].split("^"),s=0,Q=N.length;s<Q;s+=1)-1===e(d,N[s])&&d.push(N[s]);if(K&&K.length)for(p=0,R=K.length;p<R;p+=1)for(G=K[p].split("-"),N=parseInt(G[0]),$[N]={},s=1,Q=G.length;s< Q;s+=1)$[N][parseInt(G[s])]=!0;p=0;for(K=A.length;p<K;p+=1){for(var s=A[p],R=[],G=[],N=[],s=u(s,x,b),s=t(s,k,g,!0)[1],Q=[],O=0,P=0,D=0,V=s.length-1;D<V;D+=1){var aa=s[D],ca=s[D+1],O=O+aa[0],P=P+ca[1];if(!$[p]||!$[p][D])if(h){var ha=0,fa=ca[0]-aa[0],qa=ca[1]-aa[1];0===fa?ha=0.5:0===qa?ha=ca[0]>aa[0]?0:1:(ha=Math.abs(Math.atan(qa/fa)/Math.PI),ha=ca[0]>aa[0]?ha:1-ha);qa=Math.sqrt(Math.pow(fa,2)+Math.pow(qa,2));fa=Math.round(U/64);qa=Math.ceil(qa/64);fa?N.push(0,0,qa,fa,0,fa,0,0,qa,0,qa,fa):N.push(-1, -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);fa=0.4+0.6*ha;ha=0.8+0.2*ha;R.push(aa[0],aa[1],-U,fa);R.push(ca[0],ca[1],0,ha);R.push(aa[0],aa[1],0,ha);R.push(aa[0],aa[1],-U,fa);R.push(ca[0],ca[1],-U,fa);R.push(ca[0],ca[1],0,ha)}else G.push(aa[0],aa[1],0,1,ca[0],ca[1],0,1);Q.push([aa[0],aa[1]])}s.pop();O=[O/s.length+215440491,P/s.length+106744817];Q=z.lB(h?Q:s,[],0,1);P=0;for(D=Q.length;P<D;P+=1)for(s=0;3>s;s+=1)V=-U,h||(V=0),N.push(0,0,0,0,0,0),R.push(Q[P][s][0],Q[P][s][1],V,0);s=[l,m,v];a.Ja.push([new Float32Array(R), new Float32Array(N),new Float32Array(G),s,null,O])}}a.Ej=d;return a}function d(a,b,c,d,g,h){c=a.Ja;d=[];for(var k=a.Ni,l=null,m=null,n={},p=1,q=c.length;p<q;p+=1){var s=c[p],v=s[1].split("&"),l=r(y?y:v[0]),m=r(v[2]),A=v[0]+v[2];n[A]||(n[A]={ZV:[],VU:[],vn:[],sG:[],z8:l,borderColor:m,Nb:s[2]});var l=n[A].ZV,m=n[A].VU,v=n[A].vn,A=n[A].sG,U=s[0],K=s[3]*Math.pow(2,2),$=s[4],R={};if((s=s[5])&&s.length)for(var G=0,N=s.length;G<N;G+=1)for(var Q=s[G].split("-")[1].split("^"),O=0,P=Q.length;O<P;O+=1)-1=== e(d,Q[O])&&d.push(Q[O]);if($&&$.length)for(s=0,N=$.length;s<N;s+=1)for(Q=$[s].split("-"),O=parseInt(Q[0]),R[O]={},G=1,P=Q.length;G<P;G+=1)R[O][parseInt(Q[G])]=!0;s=0;for($=U.length;s<$;s+=1){for(var D=U[s],D=u(D,x,b),D=t(D,k,g,!0)[1],G=[],N=0,Q=D.length-1;N<Q;N+=1){var O=D[N],P=D[N+1],V=[O[0]-0*K,O[1]-0.3*K],aa=[P[0]-0*K,P[1]-0.3*K];R[s]&&R[s][N]||(h?((P[0]-O[0])*(V[1]-O[1])<(V[0]-O[0])*(P[1]-O[1])&&(l.push(V[0],V[1],2),l.push(P[0],P[1],-1),l.push(O[0],O[1],-1),l.push(V[0],V[1],2),l.push(aa[0],aa[1], 2),l.push(P[0],P[1],-1),A.push([O,P,aa,V])),v.push(V[0],V[1],-1,aa[0],aa[1],-1)):v.push(O[0],O[1],-1,P[0],P[1],2));G.push([V[0],V[1]])}D.pop();N=z.lB(h?G:D,[],0,1);A.push(h?G:D);D=0;for(Q=N.length;D<Q;D+=1)for(G=0;3>G;G+=1)m.push(N[D][G][0],N[D][G][1],3)}}a.Ja=[];for(D in n)n.hasOwnProperty(D)&&(v=[n[D].z8,n[D].borderColor,n[D].Nb],n[D].sG.zp=!0,a.Ja.push([new Float32Array(n[D].ZV),new Float32Array(n[D].VU),new Float32Array(n[D].vn),v,n[D].sG]));a.Ej=d;return a}function e(a,b){if(a&&!a.length)return-1; if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function g(a,b){for(var c=a.Ja,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},g=0,h=c.length;g<h;g++){for(var k=[],l=0,n=c[g].length;l<n;l++){var p=[],q=[],u=[];m(p,u,q,c[g][l][1],a.ja,b);q.zp=!0;p.forEach(function(a,b){k.push([a,u[b]])})}if(k.length){var s=[[],[],{width:0.75*c[g][0][0],borderColor:r(e[g])}];k.forEach(function(a){var b=s[0].length/9;b&&(a[1]=a[1].map(function(a){return a+ b}));s[0]=s[0].concat(a[0]);s[1]=s[1].concat(a[1])});s[0]=new Float32Array(s[0]);s[1]=new Uint16Array(s[1]);d.push(s)}}a.Ja=d;return a}function h(a){var b=[],c=[],d=[];a=t(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=z.lB(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d),{},c]}function k(a,b,c,d,e){for(var g="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),h=a.Ja.slice(1),k=h.length-1;0<=k;k--)h[k].AS= k;h.sort(function(a,b){return a[2]>b[2]?1:a.AS>b.AS?1:-1});for(var m={},k=0,n=h.length;k<n;k+=1){var p=h[k],q=p[1].split("&"),u,t,v,x,z;u=t=v=x=z=null;var A,y,G,N,Q=null,O=!1;A=y=G=N=null;q[1]&&(u=r(q[1]));t=parseInt(q[0]);v=q[2];v!==g[0]&&(v===g[1]?A="round":v===g[2]?A="square":0===v.indexOf(g[5])?(Q=!0,G=[3,2]):0===v.indexOf(g[3])?(G=eval("["+v.substring(5).split(")")[0]+"]"),G.forEach(function(a,b){G[b]*=e})):0===v.indexOf(g[4])&&(x=u,u=q[4]?r(q[4]):[1,1,1,u[3]],G=[12,12],O=!0,z=3,t=1));q[3]&& q[4]&&3<q.length&&(z=t+parseInt(q[3]),x=r(q[4]),v=q[5],v!==g[0]&&(v===g[1]?y="round":v===g[2]?y="square":0!==v.indexOf(g[5])&&0===v.indexOf(g[3])&&(z+=1,N=eval("["+v.substring(5).split(")")[0]+"]"),N.forEach(function(a,b){N[b]*=e}))));if(c){if(G)for(q=G.length-1;0<=q;q-=1)G[q]*=e;if(N)for(q=N.length-1;0<=q;q-=1)N[q]*=e}v=[];v.bf=0;var P=[],D=[];l(v,D,P,p[0],a.Ni,b,c,d,e,A);"app"===s&&(t/=4,z/=4);q=[t,u,G,z,x,N,Q,O,A,y,p[3]];q.Hha=!0;p=p[2];m[p]||(m[p]=[]);P.zp=!0;m[p].push([new Float32Array(v),new Uint16Array(D), q,P])}a.Ja=m;return a}function l(a,b,c,d,e,g,h,k,l,m){for(var n=0,q=d.length;n<q;n+=1){var p=a.length/11,s=p+6,r=u(d[n],x,g),v=t(r,e,k);if(1<v[1].length){for(var r=v[0],z=v[2],A=0,v=v[1].length;A<v;A+=1){if(0<A){var y=r[2*A]-r[2*A-2],G=r[2*A+1]-r[2*A-1];a.bf+=Math.sqrt(y*y+G*G)*(h?l:1)}var y=r[2*A],G=r[2*A+1],N=z[A][0],Q=z[A][1],O,P;A===v-1?(O=r[2*v-2],P=r[2*v-1]):(O=r[2*A+2],P=r[2*A+3]);var D,V;0===A?(D=y,V=G):(D=r[2*A-2],V=r[2*A-1]);if(0!==A){var aa=A===v-1?0:-1;a.push(y,G,N,Q,1,D,V,aa,O,P,a.bf); a.push(y,G,N,Q,-1,D,V,aa,O,P,a.bf)}else a.push(y,G,N,Q,0,D,V,0,O,P,a.bf),a.push(y,G,N,Q,1,D,V,0,O,P,a.bf),a.push(y,G,N,Q,1,D,V,1,O,P,a.bf),a.push(y,G,N,Q,0,D,V,1,O,P,a.bf),a.push(y,G,N,Q,-1,D,V,1,O,P,a.bf),a.push(y,G,N,Q,-1,D,V,0,O,P,a.bf),m&&(b.push(p+2,p+0,p+3),b.push(p+2,p+1,p+0),b.push(p+3,p+0,p+4),b.push(p+4,p+0,p+5));A!==v-1?(aa=0===A?0:1,a.push(y,G,N,Q,1,D,V,aa,O,P,a.bf),a.push(y,G,N,Q,-1,D,V,aa,O,P,a.bf)):(a.push(y,G,N,Q,0,D,V,0,O,P,a.bf),a.push(y,G,N,Q,1,D,V,0,O,P,a.bf),a.push(y,G,N,Q,1, D,V,-1,O,P,a.bf),a.push(y,G,N,Q,0,D,V,-1,O,P,a.bf),a.push(y,G,N,Q,-1,D,V,-1,O,P,a.bf),a.push(y,G,N,Q,-1,D,V,0,O,P,a.bf));A!==v-1?(b.push(s+4*A,s+4*A+3,s+4*A+1),b.push(s+4*A,s+4*A+2,s+4*A+3)):m&&(y=s+4*(v-1),b.push(y+1,y+2,y+0),b.push(y+2,y+3,y+0),b.push(y+0,y+4,y+5),b.push(y+0,y+3,y+4))}c.push(z)}}}function m(a,b,c,d,e,g){for(var h=0,k=d.length;h<k;h+=1){var l=[],m=[],n=u(d[h]),p=t(n,e,g);c.push(p[2]);if(1<p[1].length){var q=p[1].length;p[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a: b===q-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=q-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function n(a,b,c,d,e,g,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=t(u(d[l],x,g),e,h);if(2<p[1].length&&(n=z.lB(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]),k)))for(var n=0,q=p[2].length;n< q;n+=1){var s=p[2][n][0]/512,r=p[2][n][1]/512;1==e.x%2&&(s+=0.5);1==e.y%2&&(r+=0.5);k.push(s,r)}}}function p(a,b,c){var d=a.Ja,e=[],g=[],h=[],k=[];q(a,g,h,c);for(var l=[[[0,0],[255,0],[255,255],[0,255]]],m=[[0,0],[255,0],[0,255],[255,255]],p=a.Ni,s=0,u=m.length;s<u;s+=1){var t=m[s][0]/512,v=m[s][1]/512;1==p.x%2&&(t+=0.5);1==p.y%2&&(v+=0.5);k.push(t,v)}l.zp=!0;e.push([new Float32Array(g),new Uint16Array(h),r("ff"+a.mQ.substr(1)),"regions:land",l,new Float32Array(k)]);d.sort(function(a,b){return"string"=== typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});m=1;for(p=d.length;m<p;m+=1)s=d[m],g=[],h=[],l=[],k=[],u=r(s[1].split("&")[0]),n(g,h,l,s[0],a.Ni,b,c,k),l.zp=!0,e.push([new Float32Array(g),new Uint16Array(h),u,s[3],l,new Float32Array(k)]);a.Ja=e;return a}function q(a,b,c,d){var e=a.Ni;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var g=256*d;d=a+g;b.push(d,e);e+=g;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function r(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c, 2),16)/255);b.push(b.shift());return b}function t(a,b,c,d){var e=0,g=0,e=256*b.x,g=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(g+a[l+1])*c-106744817,q=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[q-2]||p!==k[q-1])n===k[q-2]&&n===k[q-4]?(k[q-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[q-1]&&p===k[q-3]?(k[q-2]=n,b[b.length-1][0]=n,h[b.length-1][0]=a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l], a[l+1]]))}return[k,b,h]}function u(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,g;"v5"<b?(e=d.length,g=512):(e=27,d=d.substr(0,27),g=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-g,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}var x,v=Number.EPSILON||2E-16,s,A=!1,y=null,z={wf:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]-a[e][0]*a[d][1];return 0.5*c},vda:function(){return function(a, b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h,k,l;if(0<z.wf(a))for(k=0;k<c;k++)e[k]=k;else for(k=0;k<c;k++)e[k]=c-1-k;var m=2*c;for(k=c-1;2<c&&!(0>=m--);){h=k;c<=h&&(h=0);k=h+1;c<=k&&(k=0);l=k+1;c<=l&&(l=0);var n;a:{var p=n=void 0,q=void 0,s=void 0,u=void 0,t=void 0,r=void 0,x=void 0,A=void 0,p=a[e[h]][0],q=a[e[h]][1],s=a[e[k]][0],u=a[e[k]][1],t=a[e[l]][0],r=a[e[l]][1];if(v>(s-p)*(r-q)-(u-q)*(t-p))n=!1;else{var y=void 0,N=void 0,Q=void 0,O=void 0,P=void 0,D=void 0,V=void 0,aa=void 0,ca= void 0,ha=void 0,ca=aa=V=A=x=void 0,y=t-s,N=r-u,Q=p-t,O=q-r,P=s-p,D=u-q;for(n=0;n<c;n++)if(x=a[e[n]][0],A=a[e[n]][1],!(x===p&&A===q||x===s&&A===u||x===t&&A===r)&&(V=x-p,aa=A-q,ca=x-s,ha=A-u,x-=t,A-=r,ca=y*ha-N*ca,V=P*aa-D*V,aa=Q*A-O*x,ca>=-v&&aa>=-v&&V>=-v)){n=!1;break a}n=!0}}if(n){d.push([a[e[h]],a[e[k]],a[e[l]]]);g.push([e[h],e[k],e[l]]);h=k;for(l=k+1;l<c;h++,l++)e[h]=e[l];c--;m=2*c}}return b?g:d}}(),lB:function(a,b,c,d){var e,g,h,k={};b=0;for(e=a.length;b<e;b++)h=a[b][0]+":"+a[b][1],k[h]=b;a= z.vda(a,!1);if(!a)return[];if(d)return a;var l=[];b=0;for(e=a.length;b<e;b++)for(g=a[b],d=0;3>d;d++)h=g[d][0]+":"+g[d][1],h=k[h],l.push(h+c);return l},gha:function(a){return 0>z.wf(a)}};return{qI:function(e,g){x=e.nk;A=e.j$;s=e.mode;var h=A?c:d,l=e.wv,m=e.ls;y=e.Zy;for(var n=e.Y,q=[],u=Math.pow(2,20-l),t=0,r=e.Kd.length;t<r;t+=1){var v=e.Kd[t];switch(v.yd){case "region":q.push(p(v,l,u));break;case "road":q.push(k(v,l,m,u,e.SU));break;case "building":q.push(h(v,l,m,n,u,e.G6))}}e.Kd=q;if(a){h=[];t= 0;for(r=q.length;t<r;t++)if((l=q[t].Ja)&&l.length)for(m=0,n=l.length;m<n;m++)l[m].buffer&&l[m].buffer instanceof ArrayBuffer&&h.push(l[m].buffer);a.Ly(h)}g(null,{data:e})},$aa:function(a,b){for(var c=a.Kd,d=Math.pow(2,20-a.Cf),e=[],h=0,k=c.length;h<k;h++)e.push(g(c[h],d));a.Kd=e;b(null,{data:a})},aU:function(a,b){var c=a.$r.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},YT:function(a,b){var c=a.Za,d=a.Oj,e=0,g=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+ d*Math.cos(e),c[1]+d*Math.sin(e)),e+=g,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},jia:function(){}}};f.sW=a();f.AB=new f.at(a,{})}})(f);(function(){function a(){function a(b,c,d,e,g,k){var l=[0,0,0,0,0],n=d.slice(0,4).concat(l),p=[],r=Math.PI/180*1,L=void 0,M=void 0,L=d.slice(0,2),T=m(e),Z=m(g),M=q.normalize(h(T).jf(h(L))),B=q.normalize(h(Z).jf(h(L)));q.sH(M,k)?(L=q.Uz(M),M=q.Uz(B)):(L=q.Uz(B),M=q.Uz(M),k=[Z,T],T=k[0],Z=k[1],g=[g,e],e=g[0],g=g[1]);T=Math.round(Math.abs(M-L)/r);for(k=0;k<=T;k++)0===k?(n.push.apply(n,e.slice(0,4)),n.push.apply(n,l)):k===T?(n.push.apply(n,g.slice(0,4)),n.push.apply(n,l)):(Z=(k*r+L)%(2*Math.PI),n.push.apply(n, d.slice(0,2).concat([0,0])),n.push(1*Math.cos(Z),1*Math.sin(Z),0,0,0)),0<k&&p.push(0,k-1,k),k==T&&p.push(0,T,T+1);var F=b.length/9;b.push.apply(b,n);c.push.apply(c,p.map(function(a){return a+F}))}function c(c,d,e,g,k){function l(a,b,c,d,e){var g=void 0;a.tz(b)||q.QS(a,b)?g=b:c&&d&&e?g=a:c&&!d&&e?g=b:c||d||e?c||!d||e?(g=q.normalize(a.kh(b)),L=q.cos(g,a),g=g.XF(L)):g=a:g=b;return g}function n(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(J,0,0);if(void 0===c||!1===c)d.push(a[0], a[1]),d.push(b.y,-b.x,0,0),d.push(J,0,0)}var p=c.length,r=0,J=0,L=void 0,M=void 0;k&&(g="bevel");c.forEach(function(c,t,B){var F=B[t-1];B=B[t+1];var C=void 0;F&&(J+=q.Kh(c,F));if(0===t||t===p-1)0===t?(void 0===B&&(B=c),C=q.normalize(h(B[0]-c[0],B[1]-c[1])),e.push(0,1,2)):(C=q.normalize(h(c[0]-F[0],c[1]-F[1])),t=d.length/9+2,4===t?e.push(3,2,1):e.push(t-3-r,t-1,t-2)),n(c,C);else{var E=q.normalize(h(c[0]-F[0],c[1]-F[1])),I=q.normalize(h(B[0]-c[0],B[1]-c[1]));t=q.normalize(E.multiply(-1).kh(I));M=q.sH(t, E);L=q.cos(t,E);n(c,l(E,I,M,!0,!0),!0);n(c,l(E,I,M,!0,!1),!1);n(c,l(E,I,M,!1,!0),!0);n(c,l(E,I,M,!1,!1),!1);F=d.length/9;B=F-4;var C=B+2,W=9*B,H=W+9,Y=H+9,S=Y+9;M?(Y=m(d.slice(H,Y)),W=m(d.slice(W,H)),W=q.normalize(h(Y).jf(h(W))),W=Math.abs(q.cos(E,W)/q.sin(E,W)*2),d[H+7]=-W,d[S+7]=W):(S=m(d.slice(W,H)),H=m(d.slice(H,Y)),H=q.normalize(h(S).jf(h(H))),H=Math.abs(q.cos(H,E)/q.sin(H,E)*2),d[W+7]=-H,d[Y+7]=H);q.QS(E,I)?e.push(B,B+1,B-2-r):e.push(B,B-1-r,B+1);"miter"==g&&(M?n(c,l(E,I,0,!0,!0),!0):n(c,l(E, I,0,!0,!0),!1),r=1);"round"===g&&(I=E=c=void 0,M?(c=d.slice(9*(B+1),9*(B+2)),E=d.slice(9*B,9*(B+1)),I=d.slice(9*C,9*(C+1))):(c=d.slice(9*B,9*(B+1)),E=d.slice(9*(B+1),9*(B+2)),I=d.slice(9*(C+1),9*(C+2))),a(d,e,c,E,I,t.multiply(-1)),r=d.length/9-F);e.push(C,C+1,C+2+r);k||"bevel"!=g&&"miter"!=g||(M?e.push(C,B,B+1):e.push(C,C-1,C+1),"miter"==g&&(M?e.push(C+2,C-2,C):e.push(C+2,C+1,C-1)))}})}function d(a,b,c){function d(a,b){var c=void 0;if(a.tz(b))c=b;else{var c=q.normalize(a.kh(b)),e=q.cos(c,a);e>Math.sqrt(3)/ 2&&(e=Math.sqrt(3)/2);c=c.XF(e)}return c}function e(a,c,d){if(void 0===d||!0===d)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(l,0,0);if(void 0===d||!1===d)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(l,0,0)}for(var g=a[0],k=a[a.length-1],l=0,m=void 0;g[0]===k[0]&&g[1]===k[1]&&g!==k;)a.pop(),k=a[a.length-1];a.push(g);a.push(a[1]);a.unshift(k);var n=a.length;a.forEach(function(a,g,k){var p=k[g-1];k=k[g+1];var r=void 0;p&&(l+=q.Kh(a,p));if(0===g||g===n-1)0===g?(r=q.normalize(h(k[0]-a[0],k[1]-a[1])), c.push(0,1,2)):(r=q.normalize(h(a[0]-p[0],a[1]-p[1])),g=b.length/9+2,c.push(g-3,g-1,g-2)),e(a,r);else{g=q.normalize(h(a[0]-p[0],a[1]-p[1]));k=q.normalize(h(k[0]-a[0],k[1]-a[1]));p=q.normalize(g.multiply(-1).kh(k));m=q.sH(p,g);e(a,d(g,k),!0);e(a,d(g,k),!1);e(a,d(g,k),!0);e(a,d(g,k),!1);a=b.length/9-4;k=a+2;var r=9*a,t=r+9,A=t+9,y=A+9;g=Math.abs(q.cos(g,p)/q.sin(g,p));m?(b[r+7]=g,b[t+7]=-g,b[A+7]=-g,b[y+7]=g):(b[r+7]=-g,b[t+7]=g,b[A+7]=g,b[y+7]=-g);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c, d,e){function g(a,b){r.push.apply(r,a.slice(0,k));r.push(b.x,b.y);r.push.apply(r,a.slice(l));r.push.apply(r,a)}var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",n=c.length-1,p=d.length,r=[],X=[],J=[d.slice(0,9),d.slice(9,18)],L=[d.slice(p-9,p),d.slice(p-18,p-9)];"square"===m?(m=q.normalize(h(c[0]).jf(h(c[1]))),g(J[0],m),g(J[1],m),m=q.normalize(h(c[n]).jf(h(c[n-1]))),g(L[0],m),g(L[1],m),X.push(0,2,3,3,1,0),X.push(6,7,4,4,7,5)):"round"===m&&(m=J[0].slice(0,2).concat(0,0,0,0).concat(J[0].slice(l)), a(d,e,m,J[0],J[1],q.normalize(h(c[0]).jf(h(c[1])))),m=L[0].slice(0,2).concat(0,0,0,0).concat(L[0].slice(l)),a(d,e,m,L[0],L[1],q.normalize(h(c[n]).jf(h(c[n-1])))));d.push.apply(d,r);e.push.apply(e,X.map(function(a){return a+p/9}))}function g(a){var b=[];a.forEach(function(a){var c=a[0]-p[0];a=a[1]-p[1];var d=b.length-1;if(-1===d)b.push([c,a]);else if(c!==b[d][0]||a!==b[d][1])if(1<=d){var e=q.normalize(h(c-b[d][0],a-b[d][1])),g=q.normalize(h(b[d][0]-b[d-1][0],b[d][1]-b[d-1][1]));e.tz(g)?b[d]=[c,a]: b.push([c,a])}else b.push([c,a])});return b}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);return Object.create(r,{x:{value:a},y:{value:b}})}var k,l;function m(a){return[a[0]+n*a[2],a[1]+n*a[3]]}var n=1;k=4;l=6;var p=[215440491,106744817],q={normalize:function(a){var b=this.length(a);return a.XF(b)},rr:function(a,b){return a.multiply(b)},QF:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.QF(a, b)/(this.length(a)*this.length(b))},cos:function(a,b){return this.rr(a,b)/(this.length(a)*this.length(b))},sH:function(a,b){return 0<this.QF(a,b)},Kh:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},QS:function(a,b){return a.multiply(-1).tz(b)},Uz:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}},r={kh:function(a){return h(this.x+a.x,this.y+a.y)},jf:function(a){return h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?h(this.x*a,this.y* a):this.x*a.x+this.y*a.y},XF:function(a){return h(this.x/a,this.y/a)},tz:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"miter":h,k=a.lineCap,k=void 0===k?"butt":k,l=a.q$,l=void 0===l?!1:l,m=a.Fl,n=void 0===m?!1:m,p=[],m=[],q=g(a.$r);l?(d(q,p,m),h=p.length,[0,1,2,h/9-1,h/9-2].forEach(function(a){p[9*a+8]=-1})):(c(q,p,m,h,n),e(q,p,m,k));b(null,{data:[new Float32Array(p),new Uint16Array(m)]})}}}f.qW=a();f.nea=new f.at(a,{})})();f.Aw={i$:function(a,b,c){b=f.Aw.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.Ha=b;return!0},createProgram:function(a,b,c){b=f.Aw.jT(a,a.VERTEX_SHADER,b);c=f.Aw.jT(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)),a.deleteProgram(d),a.deleteShader(c), a.deleteShader(b),null)},jT:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)}};f.R.Fe.Ac=f.R.hd.th.extend({ea:[f.Ys],B:function(a,b){this.pj=20;this.gb=Math.min(2,window.devicePixelRatio||1);this.En=1;arguments.callee.oa.apply(this,arguments);this.X("mapStyle",a.j);this.X("style",a.j);this.Qh=this.Ng=!0;a.j.O.rn&&this.ht(a,b);this.Xk=0;this.Sz()||this.set("reload")},JX:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", PW:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.q&&(this.q.ya=!1);this.Ba.clear();this.sa&&this.sa.parentNode&&this.sa.parentNode.removeChild(this.sa);this.set("display")},pA:function(a){if(this.q&&a.AH===this.q.ce)for(var b=0,c=a.Kd.length;b<c;b+=1)this.Jv(a.Kd[b],a.wv,a.ls,a.Y)},GI:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];this.j.Li&&d[3]&&!this.j.Wb&&(d[2]=this.T.fn(d[2],d[3]));d.re=d[1].length;d[0]=this.Sf(this.Ea.ARRAY_BUFFER,d[0]);d[1]=this.Sf(this.Ea.ELEMENT_ARRAY_BUFFER,d[1])}},RI:function(a){for(var b= 0,c=a.length;b<c;b+=1){var d=a[b];d.re=d[1].length;d[0]=this.Sf(this.Ea.ARRAY_BUFFER,d[0]);d[1]=this.Sf(this.Ea.ELEMENT_ARRAY_BUFFER,d[1]);this.j.Li&&d[2][10]&&!this.j.Wb&&(d[2][1]=this.T.wi(d[2][1],d[2][10],1),d[2][4]=this.T.wi(d[2][4],d[2][10],0))}},BF:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.Ev=d[0].length/3;d[0]=this.Sf(this.Ea.ARRAY_BUFFER,d[0]);d.hA=d[1].length/3;d[1]=this.Sf(this.Ea.ARRAY_BUFFER,d[1]);d.Fv=d[2].length/3;d[2]=this.Sf(this.Ea.ARRAY_BUFFER,d[2]);if(this.j.Li&& d[3][2]&&!this.j.Wb){var e=this.T.ap(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},Sf:function(a,b){if(b.length){var c=this.Ea,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},AR:function(a){var b=a.ja,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.jp(e,h,d));m||l===c||(m=this.jp(e,l,d));m||k===c||(m=this.jp(e,k,d));return m?(a.status=m.status,a.za=m.za,a.Vb=m.Vb,a.rc=m.rc,a.Ma={building:m.Ma.building,region:m.Ma.region,road:m.Ma.road, tl:(b.x-m.ja.x)/g+m.Ma.tl},!0):!1},jp:function(a,b,c){if((a=this.Ba.get(a+"/"+b+"/"+c))&&a.Ma)return a},Jv:function(a){var b=a.yd,c=this.Ba.get(a.Oi);if(c){c.Ma||(c.Ma={tl:0});c.Ma[b]=a.Ja;if("region"===b)this.GI(a.Ja);else if("road"===b)for(var d in a.Ja)a.Ja.hasOwnProperty(d)&&this.RI(a.Ja[d]);else"building"===b&&(this.BF(a.Ja),a.Ej&&a.Ej.length&&!c.Wf&&(c.Wf={},c.Wf.de=a.Ej,f.hm&&f.hm.r("vecTileParsed.buildings",{hw:c})));b===this.q.Oa[this.q.Oa.length-1]&&(c.za=!0,this.set("display"))}},Xb:function(a, b){this.Ti=a.Ti;this.Jk(a,b);a.jQ=this.vf;this.js(a,b);if(this.vf&&!this.q.ya){var c=this.q;f.md.Fd.end({id:this.j.O.id,key:"rb",index:2});c.ya=!0;c.Fc?c.da("renderComplete"):(c.Fc=!0,c.da("complete"))}this.tn=this.Ua;this.lh&&this.set("display",0)},Jg:function(){return this.sa},Iv:function(){f.R.Fe.Ac.Sm+=1;this.sa&&f.A.H(this.sa,"webglcontextlost",this.Iv,this);this.sa.parentNode&&this.sa.parentNode.removeChild(this.sa);if(1<f.R.Fe.Ac.Sm)this.nA();else{var a=this.sa.className;this.sa=document.createElement("canvas"); this.sa.className=a;this.Sz()}this.set("reload");new f.Ka.Xa(f.w.bc+"://webapi.amap.com/count?"+["type=glfail","c="+f.R.Fe.Ac.Sm,"crd="+f.l.XG,"k="+f.w.key,"u="+f.w.Jm,"m="+(f.l.Y?1:0),"pf="+f.l.Ep,"dpr="+window.devicePixelRatio,"scale="+(f.l.xB||0),"detect="+f.l.ga].join("&"))},nA:function(){f.l.Bf=!1;this.q&&this.q.j.O&&(this.q.j.set("baseRender",f.l.lR?"dv":"d"),this.q.j.O.LH(),this.q.R=null,this.q.qa.Jn(),this.q=null);this.sa=this.T=null},Le:function(a){this.sa=document.createElement("canvas"); this.sa.className=a||"amap-layer"},Sz:function(){if(1<f.R.Fe.Ac.Sm)return this.nA(),!1;var a=this.Ea=this.sa.getContext(f.l.pW,f.l.rW);if(a)f.A.h(this.sa,"webglcontextlost",this.Iv,this);else return this.nA(),!1;f.Aw.i$(a,this.JX,this.PW);this.MJ=a.getUniformLocation(a.Ha,"u_xDelta");this.fW=a.getUniformLocation(a.Ha,"u_othMatrix");this.iW=a.getUniformLocation(a.Ha,"u_zoomMatrix");this.dW=a.getUniformLocation(a.Ha,"u_modelMatrix");this.Ie=a.getAttribLocation(a.Ha,"a_Position");this.ri=a.getAttribLocation(a.Ha, "a_op");this.qi=a.getAttribLocation(a.Ha,"a_Previous");this.xg=a.getAttribLocation(a.Ha,"a_Next");this.br=a.getAttribLocation(a.Ha,"a_Tags");a.enableVertexAttribArray(this.Ie);this.cm=a.getUniformLocation(a.Ha,"u_FragColor");this.AJ=a.getUniformLocation(a.Ha,"u_FragColor2");this.Qi=a.getUniformLocation(a.Ha,"u_type");this.tw=a.getUniformLocation(a.Ha,"u_width");this.EJ=a.getUniformLocation(a.Ha,"u_isDash");this.FJ=a.getUniformLocation(a.Ha,"u_onlyBorder");this.DJ=a.getUniformLocation(a.Ha,"u_dash"); this.JJ=a.getUniformLocation(a.Ha,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.Xr=this.mr=this.Fl=void 0;this.Si=0;return!0},Jp:function(a){var b=Math.pow(2,a.U.zoom-this.Ld),c=a.U.Ua.Sa(this.tn).ec(this.mh);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.Ua=a.U.Ua},js:function(a,b){var c= this.sF(a,b),d=this.Ea;d.clear(d.COLOR_BUFFER_BIT);var e=this.q.ga?this.gb:this.En,g=0,h=0;0!==a.U.rotation?(g=2*Math.floor(a.U.pa.Gb.x)*e,h=2*Math.floor(a.U.pa.Gb.y)*e):(g=a.size.width*e,h=a.size.height*e);g&&h&&(this.sa.width=g,this.sa.height=h,d.viewport(0,0,this.sa.width,this.sa.height),this.Kn.apply(this,c),this.Ed(a))},Ln:256*Math.pow(2,20),eG:function(a,b){var c=b.Ma.region;if(c){this.ml(b.Ma.tl*this.Ln);for(var d=0;d<c.length;d+=1){var e=c[d],g=e[2],h=e[3];h&&this.j.Wb&&(g=this.T.fn(g,h), e.Ic=g);g&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Ie,2,a.FLOAT,!1,8,0),a.uniform4f(this.cm,g[0],g[1],g[2],g[3]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e[1]),a.drawElements(a.TRIANGLES,e.re,a.UNSIGNED_SHORT,0))}}},fG:function(a,b,c){var d=this.q.ga?this.gb:this.En,e;for(e in b)if(b.hasOwnProperty(e)){for(var g=b[e],h=0;h<g.length;h+=1){var k=g[h],l=k[2],m=l[4],n=l[10];n&&this.j.Wb&&(m=this.T.wi(m,n,0),k.Ic=m);m&&(n="square"===k[2][9]?3:"round"===k[2][9]?4:2,a.uniform1i(this.Qi, n),k[2][3]&&(this.ml(k.Si*this.Ln),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.Ie,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.ri,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.qi,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.xg,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.re,n=l[7]?l[3]:l[3]*c,a.uniform1f(this.tw,n*d),a.uniform4f(this.cm,m[0],m[1],m[2],m[3]),this.ll(l[5]?1:0,l[5],0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0)))}for(h=0;h<g.length;h+=1)k= g[h],l=k[2],l[0]&&(m=l[1],(n=l[10])&&this.j.Wb&&(m=this.T.wi(m,n,1),k.Ic=m),m&&(n="square"===k[2][8]?3:"round"===k[2][8]?4:2,a.uniform1i(this.Qi,n),this.ml(k.Si*this.Ln),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.Ie,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.ri,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.qi,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.xg,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.re,n=l[7]?l[0]:l[0]*c,a.uniform1f(this.tw,n*d),a.uniform4f(this.cm, m[0],m[1],m[2],m[3]),this.ll(l[2]?1:0,l[2],l[6]?1:0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0)))}},Yc:new f.I(215440491,106744817),Kn:function(a,b,c){if(a.length){this.Vb+=1;b=this.sa.width;c=this.sa.height;var d=this.Ea;b=(new f.nf).lV(-b/2,b/2,c/2,-c/2,0);c=Math.pow(2,this.zoom-this.pj)*(this.q.ga?this.gb:this.En);c=(new f.nf).scale(c,c,1);var e=this.Ua.ec(this.Q/Math.pow(2,this.pj-this.zoom)).Sa(this.Yc),e=(new f.nf).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.fW,!1,b.elements);d.uniformMatrix4fv(this.iW, !1,c.elements);d.uniformMatrix4fv(this.dW,!1,e.elements);d.uniform1f(this.JJ,Math.pow(2,this.zoom-this.pj)*(this.q.ga?this.gb:1));b=this.pm=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.ri);d.disableVertexAttribArray(this.qi);d.disableVertexAttribArray(this.xg);d.disableVertexAttribArray(this.br);this.ll(0,void 0,void 0);d.uniform1i(this.Qi,0);this.ml(0);for(var g=0,h=e.length;g<h;g+=1){var k=e[g];e[g].Ma&&(k.Vb=this.Vb,b.push(k),this.eG(d,k))}d.enableVertexAttribArray(this.ri); d.enableVertexAttribArray(this.qi);d.enableVertexAttribArray(this.xg);d.disableVertexAttribArray(this.br);if(e.length){for(var l={},g=0,h=e.length;g<h;g+=1){var k=e[g],m=k.Ma.road;if(m)for(var n in m)if(m.hasOwnProperty(n)){l[n]||(l[n]=[]);for(var p=0,q=m[n].length;p<q;p+=1)m[n][p].Si=k.Ma.tl,l[n].push(m[n][p])}}this.fG(d,l,Math.pow(1.3,this.zoom-e[0].ja.z))}if(!(14>this.zoom))for(d.uniform1i(this.Qi,1),this.ll(0,void 0,void 0),d.disableVertexAttribArray(this.ri),d.disableVertexAttribArray(this.qi), d.disableVertexAttribArray(this.xg),d.enableVertexAttribArray(this.br),g=0,h=e.length;g<h;g+=1)k=e[g],k.Ma.building&&this.pz(d,k)}}},pz:function(a,b){for(var c=b.Ma.building,d=0;d<c.length;d+=1){var e=c[d],g=e[3][0],h=e[3][1];if(!e||!g)break;var k=e[3][2];k&&this.j.Wb&&(h=this.T.ap(g,h,k),g=h[0],h=h[1],e.Ic=g);if(g||h)g||(g=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.AJ,g[0],g[1],g[2],g[3]),a.uniform4f(this.cm,h[0],h[1],h[2],h[3]),e.Ev&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Ie, 2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.br,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.Ev)),e.Fv&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Ie,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.br,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.Fv)),e.hA&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Ie,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.br,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.hA))}},ll:function(a,b,c){var d=this.Ea;a!==this.Fl&&(d.uniform1i(this.EJ, a),this.Fl=a);a&&b!==this.mr&&(this.mr=b,d.uniform4f(this.DJ,b[0],b[1],b[2]||0,b[3]||0));c!==this.Xr&&(d.uniform1i(this.FJ,c),this.Xr=c)},ml:function(a){a!==this.Si&&(this.Ea.uniform1f(this.MJ,a),this.Si=a)},Ed:function(){this.transform={translate:{x:this.sa.width/2,y:this.sa.height/2},scale:this.q.ga?1/this.gb:1/this.En,rotate:0}}});f.R.Fe.Ac.Sm=0; ')
_jsload_('sync', '(function(){if(f.w.Rc){var a=function(){var a=f.w.Rc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(f.w.Rc+" is not a function!");c()}else if(b)throw Error("Can not find callback: "+f.w.Rc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=["s=rsv3&product=JsInit&key="+f.w.key,"t="+(new Date).getTime()];c.push("resolution="+window.innerWidth+ "*"+window.innerHeight);c.push("mob="+(f.l.Y?1:0));c.push("vt="+(f.l.az?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+f.l.xB||0);c.push("detect="+f.l.ga);new f.Ka.Xa(f.w.Vc+"/v3/log/init?"+c.join("&"),{callback:"callback"})})(); ')