<!DOCTYPE html>
<!-- saved from url=(0032)https://www.ele.me/cart/checkout -->
<html app="eleme" perf-error="desktop/" class="scope">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        @charset "UTF-8";[ng\:cloak],[cloak],[data-cloak],[x-cloak],.cloak,.x-cloak,.hide{display:none
        !important;}ng\:form{display:block;}.animate-block-transitions{transition:0s
        all!important;-webkit-transition:0s all!important;}.hide-add-active,.hide-remove{display:block!important;}
    </style>
    <meta name="renderer" content="webkit">
    <title bind="SEO.title" class="binding">
        饿了么-网上订餐_外卖_饿了么订餐官网
    </title>
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="application-name" content="饿了么网上订餐">
    <meta name="msapplication-tooltip" content="饿了么网上订餐">
    <meta name="msapplication-starturl" content="/home/">
    <meta name="msapplication-tileimage" content="=http://static11.elemecdn.com/apple-touch-icon.png?v=2">
    <meta name="msapplication-tilecolor" content="#0088ff">
    <meta name="msapplication-task" content="name=切换地区;action-uri=http://ele.me/home;icon-uri=http://static11.elemecdn.com/apple-touch-icon.png?v=2">
    <meta name="msapplication-task" content="name=我要订餐;action-uri=http://ele.me?from=IE;icon-uri=http://static11.elemecdn.com/apple-touch-icon.png?v=2">
    <meta name="msapplication-task" content="name=订单中心;action-uri=http://ele.me/profile?from=IE;icon-uri=http://static11.elemecdn.com/apple-touch-icon.png?v=2">
    <meta name="msapplication-task" content="name=寻求帮助（HELP）;action-uri=http://ele.me/support?from=IE;icon-uri=http://static11.elemecdn.com/apple-touch-icon.png?v=2">
    <meta property="qc:admins" content="2263606250655">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="apple-touch-icon-precomposed" href="https://static2.ele.me/apple-touch-icon.png?v=2">
    <link rel="shortcut icon" href="https://static2.ele.me/eleme/desktop/media/img/favicon-16x16.png"
          type="image/png">
    <link rel="icon" href="https://static2.ele.me/eleme/desktop/media/img/favicon-16x16.png"
          type="image/png" sizes="16x16">
    <link rel="icon" href="https://static2.ele.me/eleme/desktop/media/img/favicon-32x32.png"
          type="image/png" sizes="32x32">
    <link rel="icon" href="https://static2.ele.me/eleme/desktop/media/img/favicon.png"
          type="image/png" sizes="96x96">
    <link href="/home/jiesuan_files/vendor.162d72.css" rel="stylesheet">
    <link href="/home/jiesuan_files/main.fb5e6b.css" rel="stylesheet">
    <!--[if lte IE 8]>
    <script>
        window.location.href = 'https://h.ele.me/activities/landing';
    </script>
    <![endif]-->
    <script src="/home/jiesuan_files/api" data-ref="API_CONFIG">
    </script>
    <script src="/home/jiesuan_files/perf.js.下载" type="text/javascript" crossorigin="anonymous">
    </script>
    <script src="/home/jiesuan_files/vendor.6502b2.js.下载" type="text/javascript"
            crossorigin="anonymous">
    </script>
    <script src="/home/jiesuan_files/main.4f18c4.js.下载" type="text/javascript"
            crossorigin="anonymous">
    </script>


    <script src="/home/js/jquery.min.js">    </script>
    <link rel="stylesheet" href="/home/lib/layui/css/layui.css" media="all">
    <script src="/home/lib/layui/layui.js   " charset="utf-8"></script>

    <!--<base href="/">-->
    <base href=".">
    <meta name="mobile-agent" content="undefined">
    <meta name="description" content="”饿了么”2008年创立于上海，是中国领先的本地生活平台。截至目前，饿了么在线外卖交易平台已覆盖全国2000个城市，加盟餐厅130万家，用户量达2.6亿">
    <meta name="keywords" content="饿了么，网上订餐，外卖，快餐外卖，外卖网">
</head>

<body cute-title="" class="{hidesidebar: layoutState &amp;&amp; layoutState.hideSidebar, smallbody: layoutState.smallBody, whitebody: layoutState.whiteBody}"
      class="hidesidebar" style="position: relative;">
<div switch="state.type" state="layoutState" class="isolate-scope">
    <!-- ngSwitchWhen: checkout -->

    <!-- ngSwitchDefault: -->
</div>
<div class="importantnotification container" role="banner">
    <!-- ngIf: enable -->
</div>
<div class="sidebar hide" role="complementary" hide="layoutState &amp;&amp; layoutState.hideSidebar">
    <div class="sidebar-tabs">
        <div class="toolbar-tabs-middle">


            <a class="toolbar-btn icon-order toolbar-close" href="/orders"


               hardjump="" tooltip="我的订单" tooltip-placement="left" ubt-click="toolbar_order">
                <!-- ngIf: sidebarCount.uncompletedOrder> 0 -->
            </a>
            <div class="toolbar-separator">
            </div>
            <a class="toolbar-cartbtn icon-cart toolbar-open toolbar-cartbtn-shownum"


               href="javascript:;" template="cart" class="{&#39;focus&#39;: (activeTemplate === &#39;cart&#39; &amp;&amp; isSidebarOpen), &#39;toolbar-cartbtn-shownum&#39;: foodCount.count}"

               ubt-click="390">
                购物车
                <!-- ngIf: foodCount.count -->
                <i class="toolbar-cartnum binding scope" if="foodCount.count"
                   bind="foodCount.count">
                    1
                </i>
                <!-- end ngIf: foodCount.count -->
            </a>
            <div class="toolbar-separator">
            </div>
            <a class="toolbar-btn icon-notice toolbar-open modal-hide" href="JavaScript:"
               template="message" class="{&#39;focus&#39;: (activeTemplate === &#39;message&#39; &amp;&amp; isSidebarOpen), &#39;toolbar-open&#39;: user, &#39;modal-hide&#39;: user}"
               tooltip="我的信息" tooltip-placement="left" ubt-click="392">
                <!-- ngIf: messageCount.count -->
            </a>
        </div>
        <div class="toolbar-tabs-bottom">
            <div class="toolbar-btn icon-QR-code">
                <div class="dropbox toolbar-tabs-dropbox">


                    <a href="javascript:;"


                       target="_blank">
                        <img src="/home/jiesuan_files/appqc.95e532.png" alt="下载手机应用">
                        <p>
                            下载手机应用
                        </p>
                        <p class="icon-QR-code-bonus">
                            即可参加分享红包活动
                        </p>
                    </a>
                </div>
            </div>
            <a class="toolbar-btn sidebar-btn-backtop icon-top" tooltip="回到顶部" title="回到顶部"
               href="JavaScript:" tooltip-placement="left" style="visibility: hidden;">
            </a>
        </div>
    </div>
    <div class="sidebar-content">
        <!-- ngInclude: activeTemplate ? ('/common/page/_block/sidebar/sidebar-'+
        activeTemplate + '/sidebar-'+ activeTemplate + '.html') : '' -->
    </div>
</div>
<!-- ngView: -->


<div view="" role="main" class="scope">
    <div class="checkoutguide isolate-scope" checkout-guide="" guide="guide">
        <div class="container">
            <a class="checkoutguide-logo icon-logo" href="/lists">


            </a>
            <span class="checkoutguide-text binding" bind="guide.text">
                        订单信息
                    </span>
            <!-- ngIf: guide.step -->
            <div class="checkoutguide-content step2" if="guide.step">
                        <span class="checkoutguide-item active" class="{active: guide.step &gt;= 1}">
                            选择商品
                        </span>
                <span class="checkoutguide-item active" class="{active: guide.step &gt;= 2}">
                            确认订单信息
                        </span>
                <span class="checkoutguide-item" class="{active: guide.step &gt;= 3}">
                            成功提交订单
                        </span>
                <p class="checkoutguide-line">
                            <span class="line line1">
                            </span>
                    <span class="line line2">
                            </span>
                    <span class="line line3">
                            </span>
                    <span class="line line4">
                            </span>
                </p>
            </div>
            <!-- end ngIf: guide.step -->
        </div>
    </div>


    @if($gcarts = session()->get('gcarts'))


    <div class="container clearfix scope">
        <!-- ngIf: loading -->
        <!-- ngIf: !loading && nofood -->
        <!-- ngIf: !loading && !nofood -->
        <div if="!loading &amp;&amp; !nofood" class="checkout-cart scope isolate-scope"
             checkout-cart="cart">
            <div class="checkoutcart-container">
                <div class="checkoutcart-title">
                    <h2>
                        订单详情
                    </h2>


                    <a href="/shop">


                        &lt; 返回商家修改
                    </a>
                </div>
                <div class="checkoutcart-tablerow tablehead">
                    <div class="cell itemname">
                        商品
                    </div>
                    <div class="cell itemquantity">
                        份数
                    </div>
                    <div class="cell itemtotal">
                        小计（元）
                    </div>
                </div>


                <script>

                    function delgcart(obj,id){
                        var inval = $(obj).next().val();
                        // console.log(inval);
                        var pval = $(obj).parent().next().text();
                        // console.log(pval);
                        $.get('/home/delgcart',{'id': id},function(data){
                            // console.log(data);
                            if (data == 1){
                                if (inval <=1){

                                    $(obj).parents('#pcart').remove();
                                    var dcss = $('#shopbasket').css('top');
                                    // console.log(dcss);
                                    var topp = parseInt(dcss)+45;
                                    $('#shopbasket').css('top',topp);
                                    if ($('#cparent').html()){
                                        parent.location.reload(true);
                                    }
                                }else{
                                    var n = parseInt(inval)-1;
                                    $(obj).next().val(n);
                                    var m = n*(parseInt(pval)/parseInt(inval));
                                    $(obj).parent().next().text(m);

                                }
                                var sum= $('#sum').text();
                                $('#sum').text(parseInt(sum)-(parseInt(pval)/parseInt(inval)));
                                var sbnt = $('#sbnt').text();
                                $('#sbnt').text(parseInt(sbnt)-1);
                            }

                        })

                    }
                    function addgcart(obj,id){
                        var inval = $(obj).prev().val();
                        var pval = $(obj).parent().next().text();
                        // console.log(inval);
                        $.get('/home/addgcart',{'id':id},function(data){
                            // console.log(data);
                            if (data == 1){
                                var n = parseInt(inval)+1;
                                $(obj).prev().val(n);
                                var m = n*(parseInt(pval)/parseInt(inval));
                                $(obj).parent().next().text(m);
                                var sum= $('#sum').text();
                                $('#sum').text(parseInt(sum)+(parseInt(pval)/parseInt(inval)));
                                var sbnt = $('#sbnt').text();
                                $('#sbnt').text(parseInt(sbnt)+1);

                            }

                        })
                    }
                </script>
                <!-- ngRepeat: basket in cart.vm.group -->
                <!-- ngIf: basket.length -->

                <dl if="basket.length" repeat="basket in cart.vm.group" class="checkoutcart-group scope">
                    <!-- ngRepeat: item in basket -->
                    <dd repeat="item in basket" class="scope" id="cparent">

                            @foreach( $gcarts as $v)
                                <div  class="checkoutcart-tablerow" id="pcart">
                                    <div class="cell itemname binding"  title="{{ $v->gname }}">{{ $v->gname }}</div>
                                    <div class="cell itemquantity">
                                        <button  onclick="delgcart(this,'{{ $v->id }}')">-</button>
                                        <input  class="ng-pristine ng-valid" value="{{ $v->bnt }}">
                                        <button onclick="addgcart(this,'{{ $v->id }}')">+</button>
                                    </div>
                                    <div class="cell itemtotal binding" > {{$v->bnt*$v->price }}</div>
                                </div>
                            @endforeach



                    </dd>
                    <!-- end ngRepeat: item in basket -->
                </dl>
                <!-- end ngIf: basket.length -->
                <!-- end ngRepeat: basket in cart.vm.group -->
                <!-- ngIf: cart.vm.extra || cart.vm.records -->
                <ul if="cart.vm.extra || cart.vm.records" class="scope">
                    <!-- ngRepeat: item in cart.vm.extra -->
                    <li repeat="item in cart.vm.extra" class="checkoutcart-tablerow extra scope">
                        <div class="cell itemname">
                                    <span bind="item.name" title="配送费" class="binding">
                                        配送费
                                    </span>
                            <!-- ngIf: item.name===' 配送费' -->
                            <span if="item.name === &#39;配送费&#39;" class="icon-circle-help scope"
                                  tooltip="" tooltip-placement="left">
                                    </span>
                            <!-- end ngIf: item.name===' 配送费' -->
                        </div>
                        <div class="cell itemquantity">
                        </div>
                        <div class="cell itemtotal binding" class="{minus: item.price &lt; 0}"
                             bind="&#39;¥&#39; + (item.price | number:2)">


                            ¥{{ $shopinfo->sendmoney }}
                        </div>
                    </li>


                    <!-- ngRepeat: item in cart.vm.records -->
                </ul>
                <!-- end ngIf: cart.vm.extra || cart.vm.records -->
                <div class="checkoutcart-total color-stress">
                    ¥


                    <span class="num binding" bind="cart.vm.total | number: 2" id="sum">
                                {{ $sum+$shopinfo->sendmoney }}


                            </span>
                </div>
                <div class="checkoutcart-totalextra">
                    共


                    <span bind="cart.pieces" class="binding" id="sbnt">
                               {{ $sbnt }}


                            </span>
                    份商品
                    <!-- ngIf: cart.vm.benefit -->
                </div>
            </div>
        </div>

        <!-- end ngIf: !loading && !nofood -->
        <!-- ngIf: !loading && !nofood -->
        <div if="!loading &amp;&amp; !nofood" class="checkout-content scope">
            <form action="/shop/{{ $shopinfo->id }}/finish" method="post">
                {{ csrf_field() }}
            <div class="checkout-select isolate-scope" checkout-address="" checkout-data="checkoutData"
                 address-list="addressList" address="address" isbaisheng="isBaishengRst">
                <h2>
                    收货地址
                    @if(!empty($useraddr))
                    <a show="addressList.length" class="checkout-addaddress " href="javascript:"
                       onclick="ginfo()">
                        添加新地址
                    </a>
                        @endif
                </h2>
                @if(!empty($useraddr))
                <select name="addrid" id="" style="width: 700px;height: 50px">
                    @foreach($useraddr as $v)
                    <option value="{{ $v['id'] }}" >
                        {{--张 先生 18410100203 贵都大酒店广安门内大街217号--}}
                        {{ $v['rec']  }} &nbsp;&nbsp;&nbsp;&nbsp; {{ $v['sex']  }}&nbsp;&nbsp;&nbsp; {{ $v['tel']  }} &nbsp;&nbsp;&nbsp;{{ $v['addr']  }}
                    </option>
                    @endforeach
                </select>
                @else
                <!-- ngIf: !addressList.length -->
                <a class="checkout-noaddress scope" if="!addressList.length" href="javascript:"
                   onclick="ginfo()">
                    + 添加新地址
                </a>
                @endif
                <!-- end ngIf: !addressList.length -->

            </div>
            <div class="checkout-select">
                <h2 class="checkout-title">
                    付款方式
                    <span class="color-tip checkout-pay-tip">
                                推荐使用在线支付，不用找零，优惠更多
                            </span>
                </h2>
                <ul class="clearfix">
                    <!-- ngRepeat: pay in payList -->
                    <li class="checkout-pay scope active" repeat="pay in payList" click="selectPay(pay.id, pay.disabled)"
                        class="{active: payId === pay.id, disabled: pay.disabled}" tooltip="">
                        <p bind="pay.title" class="binding">
                            在线支付
                        </p>
                        <p class="color-mute binding" bind="pay.tip">
                            支持微信、支付宝、QQ钱包及大部分银行卡
                        </p>
                    </li>
                    <!-- end ngRepeat: pay in payList -->
                </ul>
            </div>
            <div class="checkout-select">
                <h2 class="checkout-title">
                    选择优惠
                </h2>
                <p class="checkout-info">
                            <span class="checkout-infolabel">
                                使用红包
                            </span>
                    <span class="color-mute">
                                无可用红包
                        <!-- ngIf: checkout.hongbaoCount -->
                            </span>
                </p>
                <p class="checkout-info">
                            <span class="checkout-infolabel">
                                使用优惠券
                            </span>
                    <span class="color-mute">
                                网站不支持
                                <em class="color-stress">
                                    （仅手机客户端可用）
                                </em>
                            </span>
                </p>
            </div>
            <div class="checkout-select">
                <h2 class="checkout-title">
                    其他信息
                </h2>
                <div class="checkout-info">
                            <span class="checkout-infolabel">
                                配送方式
                            </span>
                    <span>
                                本订单由
                                <a bind="&#39; [&#39; + delivery + &#39;] &#39;" class="binding">
                                    [商家]
                                </a>
                                提供配送
                            </span>
                </div>
                <div class="checkout-info hide" show="showDeliverTime">
                            <span class="checkout-infolabel">
                                送达时间
                            </span>
                    <div class="formselect isolate-scope" formselect="" data="bookTimes"
                         cancle-default-handle="true" choosed="time" selectfn="updateDeliverTime">
                                <span class="formselect-value binding">
                                </span>
                        <div class="formselect-data ui-scrollbar-light">
                            <!-- ngRepeat: item in data -->
                        </div>
                        <i class="icon-arrow-down">
                        </i>
                    </div>
                </div>
                <div class="checkout-info">
                            <span class="checkout-infolabel">
                                发票信息
                            </span>
                    <span class="checkout-invoice" mouseenter="toggleInvoice($event)" mouseleave="toggleInvoice($event)">
                                <input class="checkout-input pristine valid" placeholder="仅在饿了么 APP 中支持开发票哦"
                                       disabled="!checkoutData.invoice.is_available" model="invoiceRef.invoiceValue"
                                       change="updateInvoice(invoiceRef.invoiceValue)" disabled="disabled">
                                <ul class="checkout-invoice-list hide" show="showInvoice">
                                    <!-- ngRepeat: item in invoices -->
                                </ul>
                            </span>
                </div>
                <div class="checkout-info">
                            <span class="checkout-infolabel">
                                订单备注
                            </span>
                    <span>
                                <input class="checkout-input pristine valid" model="note" change="updateDescription(note)" name="umsg">
                            </span>
                </div>
            </div>
            <div>
                <button quicksubmit-trigger="" submit-visable="checkout.submitVisable"

                        class="btn-stress btn-lg binding ng-isolate-scope " ng-disabled="orderButton.disabled"


                        bind="orderButton.text" click="orderSubmit()">
                    确认下单
                </button>
                <div class="checkout-dapp">
                    <p class="checkout-dapp-tip">
                        扫码下载APP
                        <br>
                        APP下单立享优惠
                    </p>
                    <i class="icon-qrcode checkout-dapp-qrcode">
                    </i>
                    <i class="icon-uniE029 checkout-dapp-arrow">
                    </i>
                    <img src="/home/jiesuan_files/appqc.95e532.png" alt="扫一扫下载饿了么手机 App">
                </div>
            </div>
            </form>
        </div>

        <!-- end ngIf: !loading && !nofood -->
    </div>


    @else
        <div class="nodata ng-isolate-scope" ng-if="!loading &amp;&amp; nofood" nodatatip="" content="你的购物车是空的，去<a href='/lists'>下单</a>吧"><p class="nodata-container ng-binding" ng-bind-html="content | toTrusted">你的购物车是空的，去<a href="/lists">下单</a>吧</p></div>
    @endif
    {{--<div class="checkout-quicksubmit scope" hide="checkout.submitVisable || nofood">--}}
        {{--<div class="container">--}}
                    {{--<span class="quick-text">--}}
                        {{--应付金额--}}
                        {{--<span class="yen">--}}
                            {{--¥--}}
                        {{--</span>--}}
                        {{--<span class="total binding" bind="cartView.vm.total">--}}
                            {{--83--}}
                        {{--</span>--}}
                    {{--</span>--}}
            {{--<button class="btn-stress btn-lg binding" disabled="orderButton.disabled"--}}
                    {{--bind="orderButton.text" click="orderSubmit()">--}}
                {{--确认下单--}}
            {{--</button>--}}
        {{--</div>--}}
    {{--</div>--}}
</div>
<div id="backg" style="position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; opacity: 0.5; background: rgb(0, 0, 0); z-index: 1000; display: none;"></div>
<div class="addressdialog" id="ginfo" style="z-index: 1005; left: 237px; top: 120px; display: none">
    <div onclick="xiaoshi()" class="addressdialog-close"></div><div class="addressdialog-header">添加新地址</div>
    <div class="addressdialog-content">
        <div class="addressform">
            <form id="addrform" action="/shop/{{ $shopinfo->id }}/addaddr" method="post">
                {{ csrf_field() }}
                <div>
                    <div class="addressformfield"><label>姓名</label><input placeholder="请输入您的姓名" name="rec">
                        <div class="addressformfield-hint">
                            <span></span>
                        </div></div>
                    <div class="addressformfield sexfield"><label>性别</label><div><input id="sexfield-1-male" name="sex" type="radio" value="先生" checked><label for="sexfield-1-male">先生</label><input id="sexfield-1-female" type="radio" name="sex" value="女士"><label for="sexfield-1-female">女士</label></div><div class="addressformfield-hint"><span></span></div>
                    </div>
                    <div class="addressformfield">
                        <label>详细地址</label><input placeholder="单元、门牌号" name="addr">
                        <div class="addressformfield-hint"><span></span>
                        </div>
                    </div>
                    <div class="addressformfield phonefield">
                        <label>手机号</label><input placeholder="请输入您的手机号" name="tel" id="tel" lay-verify="required|phone" autocomplete="off">
                        <div class="addressformfield-hint"><span></span>
                        </div>
                    </div>
                </div>
                <div class="addressform-buttons"><button id="addrtj">保存</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    $('#addrform').submit(function(){

        var ptn = /^1[345678]\d{9}$/;
        if(ptn.test($('#tel').val())){
            return true;

        };

        return false;
    })
    function ginfo() {
            $('#backg').css('display','block');
            $('#ginfo').css('display','block');
            // console.log($('#backg'));
            // console.log( $('#ginfo'));
    }
    function xiaoshi(){
        $('#backg').css('display','none');
        $('#ginfo').css('display','none');
    }
</script>
</body>

</html>